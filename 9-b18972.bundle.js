(window.webpackJsonp=window.webpackJsonp||[]).push([[9,3],{404:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return y}));var n,a,s,o=i(0),r=i.n(o),l=i(424),c=i(614),d=i(616),h=i(619),m=i(637),u=i(418),f=i(420),p=(i(639),i(6)),g=i(63),v=i(123);function y(){const{meta:e,episode:t}=Object(p.h)(),i=Object(g.b)(),n=Object(g.c)(e=>e.animes.data),a=n.length>0?n.filter(t=>t.key===e)[0]:{},s=Object(g.c)(e=>e.animeDetails.data),y=s.filter(e=>e.key===t),b=s.length>0&&y.length>0?y[0]:{},E=n.length>0?n.filter(t=>t.categoryKey===a.categoryKey&&t.key!==e):[],w=n.length>0?n.filter(t=>t.key!==e):[],{size:x,sizeEpisode:$}=Object(m.a)();return Object(o.useEffect)(()=>{i(Object(v.a)(e))},[i,e]),r.a.createElement(l.a,{title:Object.keys(b).length>0?`${a.title} ${b.title}`:"",descript:Object.keys(b).length>0?`AnimeAB - ${a.title} ${b.title}`:""},r.a.createElement("div",{id:"anis-detail",className:"anis-detail col-12"},r.a.createElement("div",{className:"anis"},r.a.createElement("div",{className:"anis-cover-wrap"},r.a.createElement("div",{className:"anis-cover",style:{backgroundImage:`url(${a.image})`}})),r.a.createElement("div",{className:"anis-video",style:{width:""+x.width}},r.a.createElement(c.a,{episodeItem:b,size:x}),r.a.createElement(h.a,{meta:t,animeKey:a.key,episodes:s})),r.a.createElement(d.a,{anime:a,sizeEpisode:$}))),r.a.createElement("div",{className:"main-pad"},r.a.createElement("div",{className:"main-anis"},r.a.createElement("div",{className:"content"},r.a.createElement(u.a,{animes:w,title:"Animes đề xuất"})),r.a.createElement(f.a,{title:"Anime liên quan",animes:E}))))}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(y,"useParams{{ meta, episode }}\nuseDispatch{dispatch}\nuseSelector{animes}\nuseSelector{episodesArray}\nuseOptionSize{{size, sizeEpisode}}\nuseEffect{}",()=>[p.h,g.b,g.c,g.c,m.a]),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(y,"ViewMovie","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\MoviePlayer\\index.jsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}.call(this,i(8)(e))},418:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return m}));i(435),i(419);var n,a=i(0),s=i.n(a),o=i(122),r=i(414),l=i.n(r),c=i(123);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var d,h;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function m({...e}){return s.a.createElement("div",{className:"animes"},s.a.createElement("div",{className:"slideout-heading"},s.a.createElement("h5",{className:"cat-heading"},e.title)),s.a.createElement("div",{className:"tab-content"},s.a.createElement("div",{className:"anis-list"},s.a.createElement("div",{className:"film_list-wrap"},e.animes.length>0&&e.animes.map((t,i)=>s.a.createElement("div",{key:t.key,className:e.flewBig&&i<4?"flw-item flw-item-big":"flw-item"},s.a.createElement("div",{className:"film-poster"},s.a.createElement("div",{className:"tick ltr"},s.a.createElement("div",{className:"tick-item tick-dub"},"SUB"),s.a.createElement("div",{className:"tick-item tick-dub"},"HD")),s.a.createElement("div",{className:"tick rtl"},s.a.createElement("div",{className:"tick-item tick-eps"},`${t.episodeMoment}/${t.episode}`)),s.a.createElement("img",{"data-src":t.image,className:"film-poster-img lazyloaded",alt:t.title,src:t.image}),t.isStatus<2?"":s.a.createElement(o.b,{onClick:()=>Object(c.c)(t.key,t.isStatus<3?t.linkEnd:t.linkStart),to:`/xem-phim/${t.key}/${t.isStatus<3?t.linkEnd:t.linkStart}`,className:"film-poster-ahref",title:t.title},s.a.createElement("i",{className:"fas fa-play"}))),s.a.createElement("div",{className:"film-detail"},s.a.createElement("h3",{className:"film-name"},s.a.createElement(o.b,{onClick:()=>Object(c.c)(t.key,t.isStatus<3?t.linkEnd:t.linkStart),to:`/xem-phim/${t.key}/${t.isStatus<3?t.linkEnd:t.linkStart}`,title:t.title,className:"dynamic-name"},t.title)),e.flewBig&&i<4?s.a.createElement("div",{className:"description"},t.description):"",s.a.createElement("div",{className:"fd-infor"},s.a.createElement("span",{className:"fdi-item"},"TV"),s.a.createElement("span",{className:"dot"}),s.a.createElement("span",{className:"fdi-item fdi-duration"},t.movieDuration>60?`${t.movieDuration/60}h${t.movieDuration%60}m`:t.movieDuration+"m"))),t.isStatus<2?s.a.createElement("div",{className:"clear-fix"},s.a.createElement("span",null,"Sắp công chiếu")):""))||(e.flewBig?[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].map(t=>s.a.createElement("div",{key:t,className:e.flewBig&&t<5?"flw-item flw-item-big":"flw-item"},s.a.createElement(l.a,null))):[1,2,3,4,5,6,7,8,9,10,11,12].map(t=>s.a.createElement("div",{key:t,className:e.flewBig&&t<5?"flw-item flw-item-big":"flw-item"},s.a.createElement(l.a,null))))))))}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&d.register(m,"Animes","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\Animes\\component\\Animes.jsx"),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)}).call(this,i(8)(e))},419:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},420:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return h}));i(421);var n,a=i(0),s=i.n(a),o=i(661),r=i(659),l=(i(422),i(423));(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var c,d;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function h({...e}){const t=e.animes.filter(e=>e.isStatus>1),i=t.sort((function(e,t){return t.viewDays-e.viewDays})).slice(0,10),n=t.sort((function(e,t){return t.viewWeeks-e.viewWeeks})).slice(0,10),a=t.sort((function(e,t){return t.viewMonths-e.viewMonths})).slice(0,10);return s.a.createElement("div",{id:"block-area-left"},s.a.createElement(o.a.Container,{defaultActiveKey:"today"},s.a.createElement("div",{className:"slideout-heading"},s.a.createElement("div",{className:"d-inline-block"},s.a.createElement("h5",{className:"cat-heading"},e.title),s.a.createElement("div",{className:"bah-tab-min"},s.a.createElement(r.a,{variant:"pills",className:"anw-tabs nav-fill"},s.a.createElement(r.a.Item,null,s.a.createElement(r.a.Link,{eventKey:"today"},"Ngày")),s.a.createElement(r.a.Item,null,s.a.createElement(r.a.Link,{eventKey:"week"},"Tuần")),s.a.createElement(r.a.Item,null,s.a.createElement(r.a.Link,{eventKey:"month"},"Tháng")))))),s.a.createElement(o.a.Content,{className:"block-area"},s.a.createElement(o.a.Pane,{eventKey:"today",className:"cbox-content"},s.a.createElement(l.a,{keyword:"day",animes:i})),s.a.createElement(o.a.Pane,{eventKey:"week",className:"cbox-content"},s.a.createElement(l.a,{keyword:"week",animes:n})),s.a.createElement(o.a.Pane,{eventKey:"month",className:"cbox-content"},s.a.createElement(l.a,{keyword:"month",animes:a})))))}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(h,"AreaLeft","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\AreaLeft\\component\\AreaLeft.jsx"),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,i(8)(e))},422:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},423:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return m}));var n,a=i(0),s=i.n(a),o=i(122),r=i(414),l=i.n(r),c=i(123);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var d,h;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function m({...e}){return s.a.createElement("ul",{className:"block-area-content"},e.animes.length>0&&e.animes.map((t,i)=>s.a.createElement("li",{key:"toped-"+t.key,className:i<3?"item-area top-on":"item-area"},s.a.createElement("div",{className:"film-number"},s.a.createElement("span",{className:"number"},i+1<10?"0"+(i+1):i+1)),s.a.createElement("div",{className:"film-poster-area"},s.a.createElement(o.b,{onClick:()=>Object(c.c)(t.key,t.linkStart),to:`/xem-phim/${t.key}/${t.linkStart}`},s.a.createElement("img",{"data-src":t.image,className:"film-poster-img ls-is-cached lazyloaded",alt:t.title,src:t.image}))),s.a.createElement("div",{className:"film-detail"},s.a.createElement("h3",{className:"film-name"},s.a.createElement(o.b,{onClick:()=>Object(c.c)(t.key,t.linkStart),to:`/xem-phim/${t.key}/${t.linkStart}`,title:t.title,className:"dynamic-name","data-jname":t.key},t.title)),s.a.createElement("div",{className:"fd-infor"},s.a.createElement("span",{className:"fdi-item"},s.a.createElement("i",{className:"fas fa-eye mr-2"}),("day"===e.keyword?t.viewDays:"week"===e.keyword?t.viewWeeks:t.viewMonths)+" lượt xem"))),s.a.createElement("div",{className:"film-fav list-wl-item","data-id":"100"},s.a.createElement("i",{className:"fa fa-plus"}))))||[1,2,3,4,5].map(e=>s.a.createElement("li",{key:e,className:"item-area"},s.a.createElement("div",{className:"film-number"}),s.a.createElement("div",{className:"film-poster"},s.a.createElement(l.a,null)),s.a.createElement("div",{className:"film-detail"},s.a.createElement("h3",null,s.a.createElement(l.a,null)),s.a.createElement("div",{className:"fd-infor"},s.a.createElement(l.a,null))))))}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&d.register(m,"Item","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\AreaLeft\\component\\Item.jsx"),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)}).call(this,i(8)(e))},424:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return u}));var n,a,s,o=i(0),r=i.n(o),l=i(439),c=(i(440),i(441)),d=i(442),h=i(443),m=(i(487),i(483),i(484));function u({children:e,title:t,descript:i}){const[n,a]=Object(o.useState)(!1),[s,u]=Object(o.useState)(!1),f=()=>{u(!s)},[p,g]=Object(o.useState)(!1);return Object(o.useEffect)(()=>{window.scroll(0,0)},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement("title",null,t),r.a.createElement("meta",{name:"description",content:i})),r.a.createElement("div",{id:"sidebar_menu_bg",className:n||s?"active":""}),r.a.createElement(h.a,{isSearch:p,setSearch:g,toggleMenuLeft:()=>{a(!n)},toggleMenuRight:f}),r.a.createElement(l.a,{isMenuLeft:n,setMenuLeft:a}),r.a.createElement(d.a,{isMenuRight:s,toggleMenuRight:f}),r.a.createElement("main",{className:"pt-fixed"},r.a.createElement("div",{className:"container-general"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{id:"page-content-wrapper"},e))),r.a.createElement(c.a,null)))}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(u,"useState{[isMenuLeft, setMenuLeft](false)}\nuseState{[isMenuRight, setMenuRight](false)}\nuseState{[isSearch, setSearch](false)}\nuseEffect{}"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(u,"Layout","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\layouts\\Layout\\Layout.jsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,i(8)(e))},425:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},432:function(e,t,i){"use strict";(function(e){var n;i.d(t,"a",(function(){return o})),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var a,s;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function o(e){return new Date(e).toLocaleString("en-US",{weekday:"short",day:"numeric",year:"numeric",month:"long"})}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"formatDate","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\hooks\\useFormatDatetime.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,i(8)(e))},439:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return h}));i(425);var n,a,s,o=i(660),r=i(0),l=i.n(r),c=i(122),d=i(63);function h({isMenuLeft:e,setMenuLeft:t}){const i=Object(d.c)(e=>e.categories.data),n=i.length>0?i:[],a=Object(d.c)(e=>e.collections.data),s=a.length>0?a:[],r=["#d0e6a5","#ffdd95","#fc887b","#ccabda","#abccd8","#d8b2ab"];return l.a.createElement("nav",{id:"sidebar",className:e?"sidenav open":"sidenav"},l.a.createElement("div",{className:"scrollbar-sidenav","data-simplebar":!0},l.a.createElement("div",{className:"sidenav-nav-container"},l.a.createElement("div",{className:"widget_nav_menu mb-3"},l.a.createElement("div",{className:"menu-sidenav-menu-container"},l.a.createElement("button",{className:"btn btn-radius btn-sm btn-secondary toggle-sidebar",onClick:()=>t(!1)},l.a.createElement("i",{className:"fas fa-angle-left mr-2"}),"Đóng menu"),l.a.createElement("ul",{className:"menu"},l.a.createElement("li",{className:"menu-item menu-hover"},l.a.createElement(c.b,{to:"/"},l.a.createElement("i",{className:"fas fa-home fa-sm cate__item"}),"Trang chủ")),l.a.createElement("li",{className:"menu-item menu-hover"},l.a.createElement(o.a,null,l.a.createElement(o.a.Toggle,{className:"parent",eventKey:"0",as:"a",variant:"link"},l.a.createElement("i",{className:"fas fa-video fa-sm cate__item"}),"Thể loại"),l.a.createElement("div",{className:"dropdown-sidenav-btn"},l.a.createElement("i",{className:"far fa-dot-circle fa-lg"})),l.a.createElement(o.a.Collapse,{className:"sidebar-toggled",eventKey:"0"},l.a.createElement("ul",{className:"sub-menu"},n.map((e,t)=>l.a.createElement("li",{key:e.key,className:"menu-item menu-hover"},l.a.createElement(c.b,{to:"/the-loai/"+e.key,style:{color:""+r[t%6]}},e.title))))))),l.a.createElement("li",{className:"menu-item menu-hover"},l.a.createElement(o.a,null,l.a.createElement(o.a.Toggle,{className:"parent",eventKey:"1",as:"a",variant:"link"},l.a.createElement("i",{className:"fas fa-trophy cate__item"}),"Bộ sưu tập"),l.a.createElement("div",{className:"dropdown-sidenav-btn"},l.a.createElement("i",{className:"far fa-dot-circle fa-lg"})),l.a.createElement(o.a.Collapse,{eventKey:"1"},l.a.createElement("ul",{className:"sub-menu"},s.map((e,t)=>l.a.createElement("li",{key:e.key,className:"menu-item menu-hover"},l.a.createElement(c.b,{to:"/bo-suu-tap/"+e.key,style:{color:""+r[t%6]}},e.title)))))))))))))}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(h,"useSelector{categories}\nuseSelector{collections}",()=>[d.c,d.c]),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(h,"SideBarLeft","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\layouts\\SideBar\\SideBarLeft.jsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,i(8)(e))},440:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},441:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return l}));var n,a=i(0),s=i.n(a);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var o,r;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function l(){return s.a.createElement("footer",null,s.a.createElement("div",{className:"container-fluid py-3 text-center"},s.a.createElement("p",null,s.a.createElement("i",{className:"far fa-copyright"})," 2021 AnimeAB . All Rights Reserved")))}(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(l,"Footer","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\layouts\\Layout\\Footer.jsx"),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)}).call(this,i(8)(e))},442:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return h}));var n,a,s,o=i(0),r=i.n(o),l=i(660),c=i(63),d=i(122);i(425);function h({...e}){const t=Object(c.c)(e=>e.categories.data),i=Object(c.c)(e=>e.collections.data),n=["#d0e6a5","#ffdd95","#fc887b","#ccabda","#abccd8","#d8b2ab"];return r.a.createElement("div",{id:"ingmarwp-sidenav-right",className:"sidenav-r bg-sidenav border-sidenav-left "+(e.isMenuRight?"sidenav-w-right":"")},r.a.createElement("div",{className:"sidenav-margin-top"},r.a.createElement("div",{className:"sidenav-nav-container"},r.a.createElement("div",{id:"nav_menu-2",className:"widget_nav_menu mb-3"},r.a.createElement("div",{className:"menu-sidenav-menu-container"},r.a.createElement("button",{className:"btn btn-radius btn-sm btn-secondary toggle-sidebar",onClick:()=>e.toggleMenuRight(!1)},"Đóng menu ",r.a.createElement("i",{className:"fas fa-angle-right mr-2"})),r.a.createElement("ul",{className:"menu"},r.a.createElement("li",{className:"menu-item menu-hover"},r.a.createElement(d.b,{to:"/"},r.a.createElement("i",{className:"fas fa-home fa-sm cate__item"}),"Trang chủ")),r.a.createElement("li",{className:"menu-item menu-hover"},r.a.createElement(l.a,null,r.a.createElement(l.a.Toggle,{className:"parent",eventKey:"0",as:"a",variant:"link"},r.a.createElement("i",{className:"fas fa-video fa-sm cate__item"}),"Thể loại"),r.a.createElement("div",{className:"dropdown-sidenav-btn"},r.a.createElement("i",{className:"far fa-dot-circle fa-lg"})),r.a.createElement(l.a.Collapse,{className:"sidebar-toggled",eventKey:"0"},r.a.createElement("ul",{className:"sub-menu"},t.length>0?t.map((e,t)=>r.a.createElement("li",{key:"side-r-"+t,className:"menu-item menu-hover"},r.a.createElement(d.b,{style:{color:""+n[t%6]},to:"/"+e.key},e.title))):"")))),r.a.createElement("li",{className:"menu-item menu-hover"},r.a.createElement(l.a,null,r.a.createElement(l.a.Toggle,{className:"parent",eventKey:"1",as:"a",variant:"link"},r.a.createElement("i",{className:"fas fa-trophy cate__item"}),"Bộ sưu tập"),r.a.createElement("div",{className:"dropdown-sidenav-btn"},r.a.createElement("i",{className:"far fa-dot-circle fa-lg"})),r.a.createElement(l.a.Collapse,{eventKey:"1"},r.a.createElement("ul",{className:"sub-menu"},i.length>0?i.map((e,t)=>r.a.createElement("li",{key:e.key,className:"menu-item menu-hover"},r.a.createElement(d.b,{style:{color:""+n[t%6]},to:"/"+e.key},e.title))):""))))))))))}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(h,"useSelector{categories}\nuseSelector{collections}",()=>[c.c,c.c]),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(h,"SideNavRight","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\layouts\\SideBar\\SideBarRight.jsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,i(8)(e))},443:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return p}));var n,a,s,o=i(0),r=i.n(o),l=i(122),c=(i(444),i(87)),d=i(445),h=i(448),m=i(662),u=i(658),f=i(63);function p({...e}){const[t,i]=Object(o.useState)(!1),n=Object(c.a)(),a=Object(f.c)(e=>e.animes.data),s=a.length>0?a.filter(e=>e.isStatus>1):[],p=s.length>0?s[Math.floor(Math.random()*s.length)]:{};return r.a.createElement("div",{className:"fixed-header "+(n>70?"bg-shadow":"")},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"mobie_menu"},r.a.createElement("span",{onClick:()=>e.toggleMenuLeft(e.className),className:"menu-left"},r.a.createElement("i",{className:"fas fa-bars"}))),r.a.createElement("div",{className:"logo"},r.a.createElement(l.b,{to:"/",title:"AnimeAB"},r.a.createElement("img",{src:h.a,alt:"AnimeAB"}))),r.a.createElement("div",{className:t?"search open":"search"},r.a.createElement(d.a,null)),r.a.createElement("div",{className:"mobie__search",onClick:()=>i(!t)},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("span",{onClick:()=>e.toggleMenuRight(),className:"toggle-open-close-right"},r.a.createElement("i",{className:"fas fa-bars"})),r.a.createElement("div",{className:"btn-toggle"},r.a.createElement(m.a,{key:"random-anime",placement:"bottom",overlay:r.a.createElement(u.a,{className:"tooltip-title"},"Xem anime ngẫu nhiên")},r.a.createElement(l.b,{to:`/xem-phim/${p.key}/${p.isStatus<3?p.linkEnd:p.linkStart}`,className:"random-film"},r.a.createElement("div",{className:"rd-icon"},r.a.createElement("i",{className:"fa fa-random"})),r.a.createElement("div",{className:"rd-title"},"Random"))))))}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(p,"useState{[isSearch, setSearch](false)}\nusePosition{position}\nuseSelector{animes}",()=>[c.a,f.c]),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(p,"NavBar","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\layouts\\NavBar\\NavBar.jsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,i(8)(e))},444:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},445:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return y}));var n,a,s,o=i(0),r=i.n(o),l=i(461),c=i.n(l),d=i(63),h=i(446),m=(i(447),i(6)),u=i(122),f=i(432),p=i(462),g=i.n(p),v=i(123);function y(){const e=Object(d.c)(e=>e.animes.data),[t,i]=Object(o.useState)({value:"",animes:[],loading:!1}),[n,a]=Object(o.useState)(null),s=Object(m.f)();return r.a.createElement("form",{onSubmit:e=>{e.preventDefault();const i=t.value;return s.push("/tim-kiem?keyword="+i)},className:"search-content"},r.a.createElement(u.b,{className:"filter-icon",to:"/tim-kiem"},"Lọc"),r.a.createElement(c.a,{value:t.value,items:t.animes,inputProps:{placeholder:"Tìm kiếm anime",className:"input-search"},getItemValue:e=>e.title,onSelect:(e,t)=>i({value:e,animes:[t]}),onChange:t=>{t.preventDefault(),i({value:t.target.value,loading:!0,animes:[]}),clearTimeout(n);const s=Object(h.a)(t.target.value,e,e=>{i({animes:e,loading:!1,value:t.target.value})});a(s)},renderItem:(e,i)=>r.a.createElement(u.b,{onClick:()=>Object(v.c)(e.key,e.isStatus<3?e.linkEnd:e.linkStart),to:`/xem-phim/${e.key}/${e.isStatus<3?e.linkEnd:e.linkStart}`,className:"film-item "+(i?"active":""),key:e.key},r.a.createElement("div",{className:"film-poster"},r.a.createElement("img",{src:e.image,alt:e.title})),r.a.createElement("div",{className:"film-detail"},r.a.createElement("h3",{className:"film-name"},r.a.createElement(g.a,{highlightClassName:"keyword",searchWords:[t.value],autoEscape:!0,textToHighlight:e.title})),r.a.createElement("div",{className:"film-description"},e.titleVie),r.a.createElement("div",{className:"film-infor"},r.a.createElement("span",null,Object(f.a)(e.dateRelease)),r.a.createElement("i",{className:"dot"}),r.a.createElement("span",null,"23m")))),renderMenu:(e,i)=>r.a.createElement("div",{className:"search-result-pop"},""===i?r.a.createElement("div",{className:"search-infor"},"Nhập anime cần tìm kiếm"):!0===t.loading?r.a.createElement("div",{className:"loading-relative",id:"search-loading"},r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"span1"}),r.a.createElement("div",{className:"span2"}),r.a.createElement("div",{className:"span3"}))):0===e.length?r.a.createElement("div",{className:"result","data-simplebar":!0},r.a.createElement("span",{className:"no-result"},"Không có anime tìm kiếm cho ",r.a.createElement("strong",null,i))):r.a.createElement("div",{className:"result-animes"},e,r.a.createElement(u.b,{to:"/tim-kiem?keyword="+t.value,className:"btn-view-all"},r.a.createElement("span",null,"Xem tất cả animes ",r.a.createElement("i",{className:"fa fa-angle-right ml-2"})))))}),r.a.createElement("div",{className:"search-icon"},r.a.createElement("i",{className:"fas fa-search"})))}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(y,"useSelector{list}\nuseState{[state, setState]({\r\n      value: '',\r\n      animes: [],\r\n      loading: false\r\n    })}\nuseState{[requestTimer, setRequestTimer](null)}\nuseHistory{history}",()=>[d.c,m.f]),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(y,"Search","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\Search\\Search.jsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,i(8)(e))},446:function(e,t,i){"use strict";(function(e){var n;i.d(t,"a",(function(){return r})),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var a,s;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function o(e,t){const i=new RegExp(""+t.toLowerCase()),n=e.title.toLowerCase();return i.test(n)}function r(e,t,i){return setTimeout(i,500,e?t.filter(t=>o(t,e)).slice(0,6):t)}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(o,"matchStateToTerm","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\Search\\utils.js"),a.register(r,"fakeRequest","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\Search\\utils.js")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,i(8)(e))},447:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},448:function(e,t,i){"use strict";t.a=i.p+"515fb1efd143fb86e37905a9e490677b.png"},532:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},614:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return l}));var n,a=i(0),s=i.n(a);i(615);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var o,r;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function l({size:e,episodeItem:t}){const i=`<iframe mozallowfullscreen="true" webkitallowfullscreen="true" allowfullscreen="true" src="${t.link}"></iframe>`;return s.a.createElement("div",{className:"anis-iframe",style:{height:""+e.height}},Object.keys(t).length>0&&s.a.createElement("div",{className:"player-movie",dangerouslySetInnerHTML:{__html:i}}))}(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(l,"VideoPlayer","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\MoviePlayer\\AnimeDetail\\component\\VideoPlayer.jsx"),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)}).call(this,i(8)(e))},615:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},616:function(e,t,i){"use strict";(function(e){i(435);var n,a=i(0),s=i.n(a),o=i(122),r=i(651),l=(i(617),i(618),i(63)),c=i(432);function d({...e}){const t=Object(l.c)(e=>e.categories.data);var i=t.filter(t=>t.key===e.anime.categoryKey),n=t.length>0&&i.length>0?i[0]:{};const[d,h]=Object(a.useState)(!0);return Object(a.useEffect)(()=>{r.a.bind("[data-fancybox]",{showClass:"fancybox-fadeIn",showLoading:!0,animated:!0,hideScrollbar:!0,closeButton:"inside"})}),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"anis-infor navigation-sticky-top",style:{width:""+e.sizeEpisode.width}},s.a.createElement("div",{className:"text-uppercase mb-3"},s.a.createElement("div",{className:"mr-3"},s.a.createElement(o.b,{className:"catlist",to:"/"+n.key},s.a.createElement("i",{className:"far fa-play-circle"}),"  ",n.title))),s.a.createElement("div",{className:"anis-img mb-3"},s.a.createElement("img",{src:e.anime.image,alt:e.anime.title})),s.a.createElement("div",{className:"anis-title"},e.anime.title),s.a.createElement("div",{className:"anis-title-sub"},e.anime.titleVie),s.a.createElement("div",{className:"anis-view mt-1"},s.a.createElement("small",null,e.anime.views," lượt xem"),"  ",s.a.createElement("small",{style:{fontSize:"4px"}},s.a.createElement("i",{className:"fa fa-circle"})),"  ",s.a.createElement("small",null,Object(c.a)(e.anime.dateRelease))),s.a.createElement("div",{className:"ml__5 mb-3"},s.a.createElement("p",{className:"anis-descript my-3 "+(d?"hidden-content":"")},e.anime.description)),s.a.createElement("div",{className:"ml__5 mb-3 more"},d?s.a.createElement("span",{onClick:()=>h(!1)},s.a.createElement("small",null,"Xem thêm ",s.a.createElement("i",{className:"fa fa-chevron-down"}))):s.a.createElement("span",{onClick:()=>h(!0)},s.a.createElement("small",null,"Ẩn bớt ",s.a.createElement("i",{className:"fa fa-chevron-up"})))),s.a.createElement("div",{className:"anis-trainer py-3"},s.a.createElement("div",{className:"play-trainer col-md-12 mr-4"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"mr-3 anis-boxes bg-danger"},s.a.createElement("i",{className:"fas fa-film fa-2x"})),s.a.createElement("div",{className:"anis-boxes-action"},s.a.createElement("a",{href:"javascripts:void(0);","data-fancybox":"gallery","data-src":e.anime.trainer},"Xem Trainer")))))))}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(d,"useSelector{categories}\nuseState{[isHidden, setHidden](true)}\nuseEffect{}",()=>[l.c]);const h=s.a.memo(d);var m,u;t.a=h,(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(d,"Information","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\MoviePlayer\\AnimeDetail\\component\\Information.jsx"),m.register(h,"default","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\MoviePlayer\\AnimeDetail\\component\\Information.jsx")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)}).call(this,i(8)(e))},617:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},618:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},619:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return g}));i(421);var n,a=i(0),s=i.n(a),o=i(486),r=i.n(o),l=i(634),c=i(635),d=(i(636),i(122)),h=i(68),m=i(661),u=i(659);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var f,p;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function g({...e}){const t=e.episodes.sort((function(e,t){return e.episode-t.episode})),i={className:"center carousel",infinite:!0,speed:500,slidesToShow:5,swipeToSlide:!0,nextArrow:s.a.createElement(l.a,null),prevArrow:s.a.createElement(c.a,null),responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:4,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:2}}]},n=t=>{Object(h.e)(e.animeKey,t)},a=function(){var i=[];return t.map((t,a)=>i.push(s.a.createElement("div",{key:t.key,className:"episode-item"},s.a.createElement("div",{className:"position-relative d-block "+(e.meta===t.key?"active-anis":"")},s.a.createElement(d.b,{onClick:()=>n(t.key),to:`/xem-phim/${e.animeKey}/${t.key}`,className:"imageouta"},s.a.createElement("img",{src:t.image,className:"img-fluid shadow-sm w-100",alt:t.title}))),s.a.createElement("div",{className:"p-2 my-md-2"},s.a.createElement("h6",null,`Tập ${a+1} - ${t.title}`),s.a.createElement("small",null,t.views," lượt xem"))))),i};return s.a.createElement("div",{className:"episode"},s.a.createElement("div",{className:"main-pad"},s.a.createElement(m.a.Container,{defaultActiveKey:"slider"},s.a.createElement("div",{className:"slideout-heading"},s.a.createElement("div",{className:"episode__title"},s.a.createElement("h5",{className:"cat-heading"},"Danh sách tập"),s.a.createElement("div",{className:"toggle-episodes"},s.a.createElement(u.a,null,s.a.createElement(u.a.Item,{className:"toggle-list"},s.a.createElement(u.a.Link,{eventKey:"slider",className:"action"},s.a.createElement("i",{className:"fas fa-sliders-h"}))),s.a.createElement(u.a.Item,{className:"toggle-list"},s.a.createElement(u.a.Link,{eventKey:"list",className:"action"},s.a.createElement("i",{className:"fas fa-th-list"})))))),s.a.createElement("div",{className:"episode__list"},s.a.createElement("span",null,"Tập 1 - Tập ",t.length))),s.a.createElement(m.a.Content,null,s.a.createElement(m.a.Pane,{eventKey:"slider",className:"episode-grid"},t.length>5?s.a.createElement(r.a,i,a()):s.a.createElement("div",{className:"d-flex min-episodes"},a())),s.a.createElement(m.a.Pane,{eventKey:"list",className:"episode-list"},s.a.createElement("div",{id:"list","data-simplebar":!0},s.a.createElement("div",{className:"wrapper-list"},t.map((t,i)=>s.a.createElement(d.b,{onClick:()=>n(t.key),to:`/xem-phim/${e.animeKey}/${t.key}`,className:`item d-lex ${e.meta===t.key?"active":""} \n                                ${t.episode%2==0?"back-gray":""}`,key:"episode-"+i},s.a.createElement("div",{className:"item-content"},s.a.createElement("span",{className:"episode-number"},t.episode),s.a.createElement("span",{className:"episode-title"},t.title),s.a.createElement("span",{className:"episode-icon-play"},s.a.createElement("i",{className:"fas fa-play-circle"}))))))))))))}(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(g,"Episode","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\MoviePlayer\\Episodes\\component\\Episode.jsx"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,i(8)(e))},634:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return l}));var n,a=i(0),s=i.n(a);i(532);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var o,r;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function l({...e}){const{onClick:t}=e;return s.a.createElement("div",{className:"btn-arrow-next",onClick:t},s.a.createElement("i",{className:"fas fa-chevron-right"}))}(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(l,"NextArror","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\MoviePlayer\\Episodes\\component\\NextArrow.jsx"),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)}).call(this,i(8)(e))},635:function(e,t,i){"use strict";(function(e){var n,a=i(0),s=i.n(a);i(532);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function o(e){const{onClick:t}=e;return s.a.createElement("div",{className:"btn-arrow-prev",onClick:t},s.a.createElement("i",{className:"fas fa-chevron-left"}))}const r=o;var l,c;t.a=r,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(o,"PrevArrow","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\MoviePlayer\\Episodes\\component\\PrevArrow.jsx"),l.register(r,"default","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\MoviePlayer\\Episodes\\component\\PrevArrow.jsx")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,i(8)(e))},636:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},637:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return l}));var n,a,s,o=i(0),r=i(638);function l(){const[e,t]=Object(o.useState)({}),[i,n]=Object(o.useState)({width:"960px",height:"560px"}),a=Object(r.a)().width,s=Object(r.a)().height;return Object(o.useEffect)(()=>{const e=a-17;if(a>1590){const i=e-.03*e*2-120;return n({width:.7*i+"px",height:.395*i+"px"}),void t({width:.3*i+"px"})}if(a<1025)return n({width:"100%",height:.59*(a-17)+"px"}),void t({width:"100%"});var i=e-.01*e*2-120;return n({width:.7*i+"px",height:.395*i+"px"}),void t({width:.3*i+"px"})},[n,a,s,t]),{size:i,sizeEpisode:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(l,'useState{[sizeEpisode, setSizeEpisode]({})}\nuseState{[size, setSize]({\r\n        width: "960px",\r\n        height: "560px"\r\n    })}\nuseWindowSize{}\nuseWindowSize{}\nuseEffect{}',()=>[r.a,r.a]),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(l,"useOptionSize","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\fetures\\MoviePlayer\\hook\\useOptionSize.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,i(8)(e))},638:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return r}));var n,a,s,o=i(0);function r(){const[e,t]=Object(o.useState)({width:void 0,height:void 0});return Object(o.useEffect)((function(){async function e(){const e=await(window.innerWidth>0)?window.innerWidth:window.width,i=await(window.innerHeight>0)?window.innerHeight:window.height;t({width:e,height:i})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),e}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(r,"useState{[windowSize, setWindowSize]({\r\n        width: undefined,\r\n        height: undefined\r\n    })}\nuseEffect{}"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(r,"useWindowSize","C:\\Users\\Binhh\\Máy tính\\AnimeAB\\src\\hooks\\useWindowSize.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,i(8)(e))},639:function(e,t,i){"use strict";var n=i(53)(e.i,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)},651:function(e,t,i){"use strict";i.d(t,"a",(function(){return H}));const n=e=>"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e),a=(...e)=>{let t=!1;"boolean"==typeof e[0]&&(t=e.shift());let i=e[0];if(!i||"object"!=typeof i)throw new Error("extendee must be an object");const s=e.slice(1),o=s.length;for(let e=0;e<o;e++){const o=s[e];for(let e in o)if(o.hasOwnProperty(e)){const s=o[e];if(t&&(Array.isArray(s)||n(s))){const t=Array.isArray(s)?[]:{};i[e]=a(!0,i.hasOwnProperty(e)?i[e]:t,s)}else i[e]=s}}return i},s=!("undefined"==typeof window||!window.document||!window.document.createElement);class o{constructor(e={}){this.options=a(!0,{},e),this.plugins=[],this.events={};for(const e of["on","once"])for(const t of Object.entries(this.options[e]||{}))this[e](...t)}option(e,t){e=String(e);let i=(n=e,a=this.options,n.split(".").reduce((function(e,t){return e[t]}),a));var n,a;return"function"==typeof i&&(i=i.call(this,e)),void 0===i?t:i}localize(e,t=[]){return String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(e,i,n)=>{let a=!1;if(a=n?this.option(`${i[0]+i.toLowerCase().substring(1)}.l10n.${n}`):this.option("l10n."+i),!a)return i;for(let e=0;e<t.length;e++)a=a.split(t[e][0]).join(t[e][1]);return a})}on(e,t){if(n(e)){for(const t of Object.entries(e))this.on(...t);return this}return String(e).split(" ").forEach(e=>{const i=this.events[e]=this.events[e]||[];-1==i.indexOf(t)&&i.push(t)}),this}once(e,t){if(n(e)){for(const t of Object.entries(e))this.once(...t);return this}return String(e).split(" ").forEach(e=>{const i=(...n)=>{this.off(e,i),t.call(this,this,...n)};i._=t,this.on(e,i)}),this}off(e,t){if(!n(e))return e.split(" ").forEach(e=>{const i=this.events[e];if(!i||!i.length)return this;let n=-1;for(let e=0,a=i.length;e<a;e++){const a=i[e];if(a&&(a===t||a._===t)){n=e;break}}-1!=n&&i.splice(n,1)}),this;for(const t of Object.entries(e))this.off(...t)}trigger(e,...t){for(const i of[...this.events[e]||[]].slice())if(i&&!1===i.call(this,this,...t))return!1;for(const i of[...this.events["*"]||[]].slice())if(i&&!1===i.call(this,e,this,...t))return!1;return!0}attachPlugins(e){const t={};for(const[i,n]of Object.entries(e||{}))!1!==this.options[i]&&(this.options[i]=a({},n.defaults||{},this.options[i]),t[i]=new n(this));for(const[e,i]of Object.entries(t))i.attach(this);return this.plugins=Object.assign({},this.plugins,t),this}detachPlugins(){for(const e in this.plugins){let t;(t=this.plugins[e])&&"function"==typeof t.detach&&t.detach(this)}return this.plugins={},this}}const r=(e,t=1e3)=>(e=parseFloat(e)||0,Math.round((e+Number.EPSILON)*t)/t),l="undefined"!=typeof window&&window.ResizeObserver||class{constructor(e){this.observables=[],this.boundCheck=this.check.bind(this),this.boundCheck(),this.callback=e}observe(e){if(this.observables.some(t=>t.el===e))return;const t={el:e,size:{height:e.clientHeight,width:e.clientWidth}};this.observables.push(t)}unobserve(e){this.observables=this.observables.filter(t=>t.el!==e)}disconnect(){this.observables=[]}check(){const e=this.observables.filter(e=>{const t=e.el.clientHeight,i=e.el.clientWidth;if(e.size.height!==t||e.size.width!==i)return e.size.height=t,e.size.width=i,!0}).map(e=>e.el);e.length>0&&this.callback(e),window.requestAnimationFrame(this.boundCheck)}},c=function(e){return!(!e||e.classList.contains("carousel__track")||e===document.body)&&(function(e){const t=window.getComputedStyle(e)["overflow-y"],i=window.getComputedStyle(e)["overflow-x"],n=("scroll"===t||"auto"===t)&&Math.abs(e.scrollHeight-e.clientHeight)>1,a=("scroll"===i||"auto"===i)&&Math.abs(e.scrollWidth-e.clientWidth)>1;return n||a}(e)?e:c(e.parentNode))},d=e=>{let t=0;return e&&(t=e instanceof SVGElement?Math.min(e.getClientRects()[0].width,e.width.baseVal.value):Math.max(e.offsetWidth,e.scrollWidth)),t},h=e=>{let t=0;return e&&(t=e instanceof SVGElement?Math.min(e.getClientRects()[0].height,e.height.baseVal.value):Math.max(e.offsetHeight,e.scrollHeight)),t},m={panOnlyZoomed:!1,lockAxis:!1,friction:.72,decelFriction:.92,zoomFriction:.72,bounceForce:.1,baseScale:1,minScale:1,maxScale:2,step:.5,zoomInCentered:!0,pinchToZoom:!0,textSelection:!0,click:"toggleZoom",clickDelay:250,doubleClick:!1,wheel:"zoom",wheelFactor:30,wheelLimit:3,touch:!0,draggableClass:"is-draggable",draggingClass:"is-dragging"};class u extends o{constructor(e,t={}){if(super(t=a(!0,{},m,t)),!(e instanceof HTMLElement))throw new Error("Viewport not found");this.state="init",this.$viewport=e;for(const e of["onPointerDown","onPointerMove","onPointerUp","onWheel","onClick"])this[e]=this[e].bind(this);if(this.$content=this.option("content"),this.$content||(this.$content=this.$viewport.querySelector(".panzoom__content")),!this.$content)throw new Error("Content not found");if(!1===this.option("textSelection")&&this.$viewport.classList.add("not-selectable"),this.resetValues(),this.attachPlugins(u.Plugins),this.trigger("init"),this.handleContent(),this.attachEvents(),this.trigger("ready"),"init"===this.state){const e=this.option("baseScale");1===e?(this.state="ready",this.handleCursor()):this.panTo({scale:e,friction:0})}}handleContent(){if(this.$content instanceof HTMLImageElement){const e=()=>{const e=this.$content.naturalWidth;this.maxScale=this.option("maxScale"),this.options.maxScale=function(){const t=this.contentDim.width;return e>0&&t>0?e/t*this.maxScale:this.maxScale},this.updateMetrics(),this.trigger(e>0?"load":"error")};!0!==this.$content.complete?(this.$content.onload=()=>e(),this.$content.onerror=()=>e()):e()}else this.updateMetrics()}resetValues(){this.viewportDim={top:0,left:0,width:0,height:0},this.contentDim={width:0,height:0},this.friction=this.option("friction"),this.current={x:0,y:0,scale:1},this.velocity={x:0,y:0,scale:0},this.pan={x:0,y:0,scale:1},this.drag={startTime:null,firstPosition:null,startPosition:null,startPoint:null,startDistance:null,endPosition:null,endPoint:null,distance:0,distanceX:0,distanceY:0,elapsedTime:0},this.lockAxis=null,this.pendingAnimateUpdate=null,this.pendingResizeUpdate=null,this.pointers=[]}updateMetrics(){let{top:e,left:t,width:i,height:n}=this.$viewport.getBoundingClientRect();const a=window.getComputedStyle(this.$viewport);i-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),n-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),this.viewportDim={top:e,left:t,width:i,height:n},this.contentDim={width:this.option("width",d(this.$content)),height:this.option("hidth",h(this.$content))},this.trigger("updateMetrics"),this.updateBounds()}updateBounds(e){const t={from:0,to:0},i={from:0,to:0};if(e||(e=this.velocity.scale?this.pan.scale:this.current.scale),e<1)return[t,i];const n=this.contentDim,a=this.viewportDim,s=n.width*e,o=n.height*e;return t.to=r(.5*(s-n.width)),n.width>a.width?t.from=r(t.to+a.width-s):t.from=r(-1*t.to),i.to=r(.5*(o-n.height)),n.height>a.height?i.from=r(i.to+a.height-o):i.from=r(-1*i.to),this.boundX=t,this.boundY=i,this.trigger("updateBounds",e),[this.boundX,this.boundY]}zoomIn(e){this.zoomTo(this.current.scale+(e||this.option("step")))}zoomOut(e){this.zoomTo(this.current.scale-(e||this.option("step")))}toggleZoom(e={}){const t=this.option("maxScale"),i=this.option("baseScale");this.zoomTo(this.current.scale>i+.5*(t-i)?i:t,e)}zoomTo(e,t={}){let{x:i=null,y:n=null,friction:a=this.option("zoomFriction")}=t;e||(e=this.option("baseScale")),e=Math.max(Math.min(e,this.option("maxScale")),this.option("minScale"));const s=this.contentDim.width,o=this.contentDim.height,r=s*this.current.scale,l=o*this.current.scale,c=s*e,d=o*e;null===i&&(i=.5*r),null===n&&(n=.5*l),!1===this.option("zoomInCentered")&&(i<.5*r&&(i=r),i>r&&(i=0),n<0&&(n=l),n>l&&(n=0));let h=(c-r)*((r>0?i/r:0)-.5),m=(d-l)*((l>0?n/l:0)-.5);Math.abs(h)<1&&(h=0),Math.abs(m)<1&&(m=0),i=this.current.x-h,n=this.current.y-m,this.panTo({x:i,y:n,scale:e,friction:a})}panTo(e){let{x:t=0,y:i=0,scale:n=this.current.scale,friction:a=this.option("friction"),ignoreBounds:s=!1}=e;if(a||this.stopMoving(),!0!==s){const[e,a]=this.updateBounds(n);e&&(t=Math.max(Math.min(t,e.to),e.from)),a&&(i=Math.max(Math.min(i,a.to),a.from))}return a>0&&(Math.abs(t-this.current.x)>.1||Math.abs(i-this.current.y)>.1||Math.abs(n-this.current.scale)>.1)?(this.state="panning",this.friction=a,this.pan={x:t,y:i,scale:n},this.velocity={x:(1/this.friction-1)*(t-this.current.x),y:(1/this.friction-1)*(i-this.current.y),scale:(1/this.friction-1)*(n-this.current.scale)},this.animate(),this):(this.pendingAnimateUpdate&&(cancelAnimationFrame(this.pendingAnimateUpdate),this.pendingAnimateUpdate=null),this.state="ready",this.stopMoving(),this.current={x:t,y:i,scale:n},this.transform(),this.handleCursor(),this.trigger("afterAnimate",!0),this)}animate(){if(!this.pendingAnimateUpdate){if(this.applyBoundForce(),this.applyDragForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.velocity.scale*=this.friction,this.current.x+=this.velocity.x,this.current.y+=this.velocity.y,this.current.scale+=this.velocity.scale,"dragging"==this.state||"pointerdown"==this.state||Math.abs(this.velocity.x)>.05||Math.abs(this.velocity.y)>.05||Math.abs(this.velocity.scale)>.05)return this.transform(),void(this.pendingAnimateUpdate=requestAnimationFrame(()=>{this.pendingAnimateUpdate=null,this.animate()}));this.current.x=r(this.current.x+this.velocity.x/(1/this.friction-1)),this.current.y=r(this.current.y+this.velocity.y/(1/this.friction-1)),Math.abs(this.current.x)<.5&&(this.current.x=0),Math.abs(this.current.y)<.5&&(this.current.y=0),this.current.scale=r(this.current.scale+this.velocity.scale/(1/this.friction-1),1e4),Math.abs(this.current.scale-1)<.01&&(this.current.scale=1),this.state="ready",this.stopMoving(),this.transform(),this.handleCursor(),this.trigger("afterAnimate")}}handleCursor(){const e=this.option("draggableClass");e&&this.option("touch")&&(this.contentDim.width<=this.viewportDim.width&&1==this.option("panOnlyZoomed")&&this.current.scale<=this.option("baseScale")?this.$viewport.classList.remove(e):this.$viewport.classList.add(e))}isMoved(){return 0!==this.current.x||0!==this.current.y||1!==this.current.scale||this.velocity.x>0||this.velocity.y>0||this.velocity.scale>0}stopMoving(){this.velocity={x:0,y:0,scale:0}}transform(){this.trigger("beforeTransform");const e=r(this.current.x,100),t=r(this.current.y,100),i=r(this.current.scale,1e4);Math.abs(e)<=.1&&Math.abs(t)<=.1&&Math.abs(i-1)<=.1?this.$content.style.transform="":this.$content.style.transform=`translate(${e}px, ${t}px) scale(${i})`,this.trigger("afterTransform")}applyBoundForce(){if("decel"!==this.state)return;const e={x:0,y:0},t=this.option("bounceForce"),i=this.boundX,n=this.boundY;let a,s,o,r;if(i&&(a=this.current.x<i.from,s=this.current.x>i.to),n&&(o=this.current.y<n.from,r=this.current.y>n.to),a||s){const n=(a?i.from:i.to)-this.current.x;let o=n*t;const r=this.current.x+(this.velocity.x+o)/(1/this.friction-1);a&&r<i.from||s&&r>i.to||(o=n*t-this.velocity.x),e.x=o}if(o||r){const i=(o?n.from:n.to)-this.current.y;let a=i*t;const s=this.current.y+(this.velocity.y+a)/(1/this.friction-1);o&&s<n.from||r&&s>n.to||(a=i*t-this.velocity.y),e.y=a}this.velocity.x+=e.x,this.velocity.y+=e.y}applyDragForce(){"dragging"===this.state&&(this.velocity={x:(1/this.friction-1)*(this.drag.endPosition.x-this.current.x),y:(1/this.friction-1)*(this.drag.endPosition.y-this.current.y),scale:(1/this.friction-1)*(this.drag.endPosition.scale-this.current.scale)})}attachEvents(){const e=this.$viewport;this.resizeObserver=this.resizeObserver||new l(e=>{this.pendingResizeUpdate=this.pendingResizeUpdate||setTimeout(()=>{let t=e&&e[0].contentRect;!t&&this.$viewport&&(t=this.$viewport.getBoundingClientRect()),t&&(Math.abs(t.width-this.viewportDim.width)>1||Math.abs(t.height-this.viewportDim.height)>1)&&this.updateMetrics(),this.pendingResizeUpdate=null},this.option("updateRate",250))}),this.resizeObserver.observe(e),e.addEventListener("click",this.onClick,{passive:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.option("touch")&&(window.PointerEvent?(e.addEventListener("pointerdown",this.onPointerDown,{passive:!1}),e.addEventListener("pointermove",this.onPointerMove,{passive:!1}),e.addEventListener("pointerup",this.onPointerUp),e.addEventListener("pointercancel",this.onPointerUp)):(e.addEventListener("touchstart",this.onPointerDown,{passive:!1}),e.addEventListener("touchmove",this.onPointerMove,{passive:!1}),e.addEventListener("touchend",this.onPointerUp),e.addEventListener("touchcancel",this.onPointerUp),e.addEventListener("mousedown",this.onPointerDown)))}detachEvents(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null,this.pendingResizeUpdate&&(clearTimeout(this.pendingResizeUpdate),this.pendingResizeUpdate=null);const e=this.$viewport;window.PointerEvent?(e.removeEventListener("pointerdown",this.onPointerDown,{passive:!1}),e.removeEventListener("pointermove",this.onPointerMove,{passive:!1}),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp)):(e.removeEventListener("touchstart",this.onPointerDown,{passive:!1}),e.removeEventListener("touchmove",this.onPointerMove,{passive:!1}),e.removeEventListener("touchend",this.onPointerUp),e.removeEventListener("touchcancel",this.onPointerUp),e.removeEventListener("mousedown",this.onPointerDown)),e.removeEventListener("click",this.onClick,{passive:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1})}copyPointer(e){return{pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY}}findPointerIndex(e){let t=this.pointers.length;for(;t--;)if(this.pointers[t].pointerId===e.pointerId)return t;return-1}addPointer(e){let t=0;if(e.touches&&e.touches.length)for(const i of e.touches)i.pointerId=t++,this.addPointer(i);else t=this.findPointerIndex(e),t>-1&&this.pointers.splice(t,1),this.pointers.push(e)}removePointer(e){if(e.touches){for(;this.pointers.length;)this.pointers.pop();return}const t=this.findPointerIndex(e);t>-1&&this.pointers.splice(t,1)}getMiddlePoint(){let e=[...this.pointers];e=e.sort((e,t)=>t.pointerId-e.pointerId);const t=e.shift(),i=e.shift();return i?{clientX:.5*(t.clientX-i.clientX)+i.clientX,clientY:.5*(t.clientY-i.clientY)+i.clientY}:{clientX:t?t.clientX:0,clientY:t?t.clientY:0}}getDistance(e,t){if(!(e=(e=e||[...this.pointers]).slice())||e.length<2)return 0;const i=(e=e.sort((e,t)=>t.pointerId-e.pointerId)).shift(),n=e.shift(),a=Math.abs(n.clientX-i.clientX);if("x"===t)return a;const s=Math.abs(n.clientY-i.clientY);return"y"===t?s:Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}resetDragState(){const{left:e,top:t}=this.$content.getClientRects()[0],i=this.getMiddlePoint(),n={top:t,left:e,x:this.current.x,y:this.current.y,scale:this.current.scale};a(this.drag,{startPosition:a({},n),startPoint:a({},i),startDistance:this.getDistance(),endPosition:a({},n),endPoint:a({},i),distance:0,distanceX:0,distanceY:0}),"pointerdown"===this.state&&(this.lockAxis=null,this.drag.startTime=new Date,this.drag.firstPosition=Object.assign({},n)),this.stopMoving(),this.friction=this.option("friction")}onPointerDown(e){if(e&&!(e.button&&e.button>0))if(this.option("panOnlyZoomed")&&this.velocity.scale)e.preventDefault();else{if(this.resetDragState(),!this.pointers.length){if(-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(e.target.nodeName))return;if(this.option("textSelection")&&((e,t,i)=>{const n=e.childNodes,a=document.createRange();for(let e=0;e<n.length;e++){const s=n[e];if(s.nodeType!==Node.TEXT_NODE)continue;a.selectNodeContents(s);const o=a.getBoundingClientRect();if(t>=o.left&&i>=o.top&&t<=o.right&&i<=o.bottom)return s}return!1})(e.target,e.clientX,e.clientY))return;if(c(e.target))return}if((()=>{const e=window.getSelection?window.getSelection():document.selection;e&&e.rangeCount&&e.getRangeAt(0).getClientRects().length&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())})(),this.pointers.length>1||this.pointers.length&&this.lockAxis)e.preventDefault();else if(!1!==this.trigger("touchStart",e))if(e.preventDefault(),this.state="pointerdown",this.addPointer(this.copyPointer(e)),this.resetDragState(),window.PointerEvent)try{e.target.setPointerCapture(e.pointerId)}catch(e){}else document.addEventListener("mousemove",this.onPointerMove,{passive:!1}),document.addEventListener("mouseup",this.onPointerUp,{passive:!1})}}onPointerMove(e){if(e.targetTouches&&e.targetTouches.length>1)return;if("pointerdown"!==this.state&&"dragging"!==this.state)return;if(0==this.trigger("touchMove",e))return void e.preventDefault();if(this.addPointer(this.copyPointer(e)),this.pointers.length>1&&!1===this.option("pinchToZoom"))return;if(1==this.option("panOnlyZoomed")&&this.current.scale===this.option("baseScale")&&this.pointers.length<2)return void e.preventDefault();const t=this.getMiddlePoint(),i=[t,this.drag.startPoint];this.drag.distance=this.getDistance(i);const n=this.events.click&&this.events.click.length||this.events.doubleClick&&this.events.doubleClick.length||this.option.click||this.option.doubleClick;if(this.drag.distance<6&&(n||this.option("lockAxis")&&!this.lockAxis))return;if("pointerdown"==this.state&&(this.state="dragging"),"dragging"!==this.state)return;const a=this.option("lockAxis");if(!this.lockAxis&&a)if("xy"===a){const e=this.getDistance(i,"x"),t=this.getDistance(i,"y"),n=Math.abs(180*Math.atan2(t,e)/Math.PI);this.lockAxis=n>45&&n<135?"y":"x"}else this.lockAxis=a;e.preventDefault(),e.stopPropagation(),this.$viewport.classList.add(this.option("draggingClass")),this.animate();let s=this.current.scale,o=0,r=0;if(this.current.scale===this.option("baseScale")&&"y"===this.lockAxis||(o=t.clientX-this.drag.startPoint.clientX),this.current.scale===this.option("baseScale")&&"x"===this.lockAxis||(r=t.clientY-this.drag.startPoint.clientY),this.drag.endPosition.x=this.drag.startPosition.x+o,this.drag.endPosition.y=this.drag.startPosition.y+r,this.pointers.length>1){this.drag.middlePoint=t,s=this.drag.startPosition.scale*this.getDistance()/this.drag.startDistance,s=Math.max(Math.min(s,2*this.option("maxScale")),.5*this.option("minScale"));const e=this.$content.width,i=this.$content.height,n=e*this.drag.startPosition.scale,a=i*this.drag.startPosition.scale,o=i*s,r=(e*s-n)*((this.drag.startPoint.clientX-this.drag.startPosition.left)/n-.5),l=(o-a)*((this.drag.startPoint.clientY-this.drag.startPosition.top)/a-.5);this.drag.endPosition.x-=r,this.drag.endPosition.y-=l,this.drag.endPosition.scale=s,this.updateBounds(s)}this.applyDragResistance()}onPointerUp(e){if(this.removePointer(e),window.PointerEvent)try{e.target.releasePointerCapture(e.pointerId)}catch(e){}else document.removeEventListener("mousemove",this.onPointerMove,{passive:!1}),document.removeEventListener("mouseup",this.onPointerUp,{passive:!1});if(this.pointers.length>0)return e.preventDefault(),void this.resetDragState();if("pointerdown"!==this.state&&"dragging"!==this.state)return;this.$viewport.classList.remove(this.option("draggingClass"));const{top:t,left:i}=this.$content.getClientRects()[0],n=this.drag;if(a(!0,n,{elapsedTime:new Date-n.startTime,distanceX:n.endPosition.x-n.firstPosition.x,distanceY:n.endPosition.y-n.firstPosition.y,endPosition:{top:t,left:i}}),n.distance=Math.sqrt(Math.pow(n.distanceX,2)+Math.pow(n.distanceY,2)),this.state="decel",this.friction=this.option("decelFriction"),this.pan={x:this.current.x+this.velocity.x/(1/this.friction-1),y:this.current.y+this.velocity.y/(1/this.friction-1),scale:this.current.scale+this.velocity.scale/(1/this.friction-1)},!1===this.trigger("touchEnd",e))return;if("decel"!==this.state)return;const s=this.option("minScale");if(this.current.scale<s)return void this.zoomTo(s,{friction:.64});const o=this.option("maxScale");if(this.current.scale-o>.01){const e={friction:.64};n.middlePoint&&(e.x=n.middlePoint.clientX-i,e.y=n.middlePoint.clientY-t),this.zoomTo(o,e)}}applyDragResistance(){const e=this.boundX,t=this.boundY;let i,n,a,s;if(e&&(i=this.drag.endPosition.x<e.from,n=this.drag.endPosition.x>e.to),t&&(a=this.drag.endPosition.y<t.from,s=this.drag.endPosition.y>t.to),i||n){const t=i?e.from:e.to,n=this.drag.endPosition.x-t;this.drag.endPosition.x=t+.3*n}if(a||s){const e=a?t.from:t.to,i=this.drag.endPosition.y-e;this.drag.endPosition.y=e+.3*i}}onWheel(e){!1!==this.trigger("wheel",e)&&"zoom"==this.option("wheel",e)&&this.zoomWithWheel(e)}zoomWithWheel(e){void 0===this.changedDelta&&(this.changedDelta=0);let t=this.current.scale;const i=Math.max(-1,Math.min(1,-e.deltaY||-e.deltaX||e.wheelDelta||-e.detail));if(i<0&&t<=this.option("minScale")||i>0&&t>=this.option("maxScale")){if(this.changedDelta+=Math.abs(i),this.changedDelta>this.option("wheelLimit"))return}else this.changedDelta=0;t=t*(100+i*this.option("wheelFactor"))/100,e.preventDefault();const{top:n,left:a}=this.$content.getClientRects()[0],s=e.clientX-a,o=e.clientY-n;this.zoomTo(t,{x:s,y:o})}onClick(e){if(e.defaultPrevented)return;if(window.getSelection().toString().length)return e.stopPropagation(),void e.stopImmediatePropagation();if(this.drag.startPosition&&this.drag.endPosition&&(Math.abs(this.drag.endPosition.top-this.drag.startPosition.top)>1||Math.abs(this.drag.endPosition.left-this.drag.startPosition.left)>1))return e.stopPropagation(),void e.stopImmediatePropagation();if(this.drag.distance>(this.lockAxis?6:1))return e.preventDefault(),e.stopPropagation(),void e.stopImmediatePropagation();let t=null,i=null;void 0!==e.clientX&&void 0!==e.clientY&&(t=e.clientX-this.$content.getClientRects()[0].left,i=e.clientY-this.$content.getClientRects()[0].top);let n=this.options.doubleClick;if(!n&&this.events.doubleClick&&this.events.doubleClick.length&&(n=!0),n){if(!this.clickTimer)return this.lastClickEvent=e,void(this.clickTimer=setTimeout(()=>{this.clickTimer=null,!1!==this.trigger("click",e)&&"toggleZoom"===this.option("click")&&this.toggleZoom({x:t,y:i})},this.option("clickDelay")));this.getDistance([e,this.lastClickEvent])>=6||(clearTimeout(this.clickTimer),this.clickTimer=null,!1!==this.trigger("doubleClick",e)&&"toggleZoom"===this.option("doubleClick")&&this.toggleZoom({x:t,y:i}))}else{if(!1===this.trigger("click",e))return;"toggleZoom"===this.option("click")&&this.toggleZoom({x:t,y:i})}}destroy(){"destroy"!==this.state&&(this.state="destroy",this.$viewport.classList.remove("not-selectable"),this.$content instanceof HTMLImageElement&&!this.$content.complete&&(this.$content.onload=null,this.$content.onerror=null),this.pendingAnimateUpdate&&(cancelAnimationFrame(this.pendingAnimateUpdate),this.pendingAnimateUpdate=null),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.detachEvents(),this.pointers=[],this.resetValues(),this.$viewport=null,this.$content=null,this.options={},this.events={})}}u.version="__VERSION__",u.Plugins={};const f=(e,t)=>{let i=0;return function(...n){const a=(new Date).getTime();if(!(a-i<t))return i=a,e(...n)}};class p{constructor(e){this.$container=null,this.$prev=null,this.$next=null,this.carousel=e,this.onRefresh=this.onRefresh.bind(this)}option(e){return this.carousel.option("Navigation."+e)}createButton(e){const t=document.createElement("button");t.setAttribute("title",this.carousel.localize(`{{${e.toUpperCase()}}}`));const i=this.option("classNames.button")+" "+this.option("classNames."+e);return t.classList.add(...i.split(" ")),t.setAttribute("tabindex","0"),t.innerHTML=this.carousel.localize(this.option(e+"Tpl")),t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.carousel["slide"+("next"===e?"Next":"Prev")]()}),t}build(){this.$container||(this.$container=document.createElement("div"),this.$container.classList.add(this.option("classNames.main")),this.carousel.$element.appendChild(this.$container)),this.$next||(this.$next=this.createButton("next"),this.$container.appendChild(this.$next)),this.$prev||(this.$prev=this.createButton("prev"),this.$container.appendChild(this.$prev))}onRefresh(){const e=this.carousel.pages.length;e<=1||e>1&&this.carousel.elemDimWidth<this.carousel.wrapDimWidth&&!Number.isInteger(this.carousel.option("slidesPerPage"))?this.cleanup():(this.build(),this.$prev.removeAttribute("disabled"),this.$next.removeAttribute("disabled"),this.carousel.option("infiniteX",this.carousel.option("infinite"))||(this.carousel.page<=0&&this.$prev.setAttribute("disabled",""),this.carousel.page>=e-1&&this.$next.setAttribute("disabled","")))}cleanup(){this.$prev&&this.$prev.remove(),this.$prev=null,this.$next&&this.$next.remove(),this.$next=null,this.$container&&this.$container.remove(),this.$container=null}attach(){this.carousel.on("refresh change",this.onRefresh)}detach(){this.carousel.off("refresh change",this.onRefresh),this.cleanup()}}p.defaults={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',classNames:{main:"carousel__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}};class g{constructor(e){this.nav=e,this.selectedIndex=null,this.onNavReady=this.onNavReady.bind(this),this.onNavClick=this.onNavClick.bind(this),this.onNavCreateSlide=this.onNavCreateSlide.bind(this),this.onTargetChange=this.onTargetChange.bind(this)}onNavReady(){this.onTargetChange(!0),this.nav.on("createSlide",this.onNavCreateSlide),this.nav.on("Panzoom.updateMetrics",this.onTargetChange),this.nav.Panzoom.on("click",this.onNavClick),this.sync.on("change",this.onTargetChange)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onNavClick(e,t){const i=t.target.closest(".carousel__slide");if(!i)return;t.preventDefault();const n=parseInt(i.dataset.index,10),a=this.sync.getPageforSlide(n);this.sync.page!==a&&this.sync.slideTo(a,{friction:this.nav.option("Sync.friction")}),this.markSelectedSlide(n)}markSelectedSlide(e){this.selectedIndex=e,[...this.nav.slides].filter(e=>e.$el&&e.$el.classList.remove("is-nav-selected"));const t=this.nav.slides[e];t&&t.$el&&t.$el.classList.add("is-nav-selected")}onTargetChange(e){const t=this.sync.pages[this.sync.page].indexes[0],i=this.nav.getPageforSlide(t);null!==i&&(this.nav.slideTo(i,!0===e?{friction:0}:{}),this.markSelectedSlide(t))}attach(){const e=this.nav.options.Sync;e&&(n(e)&&"object"==typeof e.with&&(this.sync=e.with),this.sync&&this.nav.on("ready",this.onNavReady))}detach(){this.sync&&(this.nav.off("ready",this.onNavReady),this.nav.off("createSlide",this.onNavCreate),this.nav.on("Panzoom.updateMetrics",this.onTargetChange),this.sync.off("change",this.onTargetChange)),this.nav.Panzoom.off("click",this.onNavClick),this.sync=null,this.selectedIndex=null}}g.defaults={friction:.92};const v={Navigation:p,Dots:class{constructor(e){this.carousel=e,this.$list=null,this.events={change:this.onChange.bind(this),refresh:this.onRefresh.bind(this)}}buildList(){if(this.carousel.pages.length<2)return;const e=document.createElement("ol");return e.classList.add("carousel__dots"),e.addEventListener("click",e=>{if(!("page"in e.target.dataset))return;e.preventDefault(),e.stopPropagation();const t=parseInt(e.target.dataset.page,10),i=this.carousel;t!==i.page&&(i.pages.length<3&&i.option("infinite")?i[0==t?"slidePrev":"slideNext"]():i.slideTo(t))}),this.$list=e,this.carousel.$element.appendChild(e),this.carousel.$element.classList.add("has-dots"),e}removeList(){this.$list&&(this.$list.parentNode.removeChild(this.$list),this.$list=null)}rebuildDots(){let e=this.$list;const t=!!e,i=this.carousel.pages.length;if(i<2)return void(t&&this.removeList());t||(e=this.buildList());const n=this.$list.children.length;if(n>i)for(let e=i;e<n;e++)this.$list.removeChild(this.$list.lastChild);else{for(let e=n;e<i;e++){const t=document.createElement("li");t.classList.add("carousel__dot"),t.dataset.page=e,t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("title",this.carousel.localize("{{GOTO}}",[["%d",e+1]])),t.addEventListener("keydown",e=>{const i=e.code;let n;"Enter"===i||"NumpadEnter"===i?n=t:"ArrowRight"===i?n=t.nextSibling:"ArrowLeft"===i&&(n=t.previousSibling),n&&n.click()}),this.$list.appendChild(t)}this.setActiveDot()}}setActiveDot(){if(!this.$list)return;this.$list.childNodes.forEach(e=>{e.classList.remove("is-selected")});const e=this.$list.childNodes[this.carousel.page];e&&e.classList.add("is-selected")}onChange(){this.setActiveDot()}onRefresh(){this.rebuildDots()}attach(){this.carousel.on(this.events)}detach(){this.removeList(),this.carousel.off(this.events),this.carousel=null}},Sync:g},y={slides:[],preload:0,slidesPerPage:"auto",initialPage:0,friction:.92,center:!0,infinite:!0,fill:!0,dragFree:!1,classNames:{viewport:"carousel__viewport",track:"carousel__track",slide:"carousel__slide",slideSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide %d"}};class b extends o{constructor(e,t={}){super(t=a(!0,{},y,t)),this.state="init",this.$element=e,e.Carousel=this,this.page=this.pageIndex=null,this.prevPage=this.prevPageIndex=null,this.slideNext=f(this.slideNext.bind(this),250),this.slidePrev=f(this.slidePrev.bind(this),250),this.attachPlugins(b.Plugins),this.trigger("init"),this.initLayout(),this.initSlides(),this.initPanzoom(),this.state="ready",this.trigger("ready")}initLayout(){if(!(this.$element instanceof HTMLElement))throw new Error("No root element provided");const e=this.option("classNames");this.$viewport=this.option("viewport")||this.$element.querySelector("."+e.viewport),this.$viewport||(this.$viewport=document.createElement("div"),this.$viewport.classList.add(e.viewport),this.$viewport.append(...this.$element.childNodes),this.$element.appendChild(this.$viewport)),this.$track=this.option("track")||this.$element.querySelector("."+e.track),this.$track||(this.$track=document.createElement("div"),this.$track.classList.add(e.track),this.$track.append(...this.$viewport.childNodes),this.$viewport.appendChild(this.$track))}initSlides(){this.slides=[];this.$viewport.querySelectorAll("."+this.option("classNames.slide")).forEach(e=>{const t={$el:e,isDom:!0};this.slides.push(t),this.trigger("createSlide",t,this.slides.length)}),Array.isArray(this.options.slides)&&(this.slides=a(!0,[...this.slides],this.options.slides))}updatePage(){let e=this.page;null===e&&(e=this.page=this.option("initialPage")),this.updateMetrics();const t=this.pages;t[e]||(e=t.length?t[t.length-1].index:0),this.slideTo(e,{friction:0})}updateBounds(){let e=this.Panzoom;const t=this.option("infinite"),i=this.option("infiniteX",t),n=this.option("infiniteY",t);i&&(e.boundX=null),n&&(e.boundY=null),i||n||(e.boundX={from:-1*this.pages[this.pages.length-1].left,to:-1*this.pages[0].left})}initPanzoom(){const e=a(!0,{},{content:this.$track,click:!1,doubleClick:!1,wheel:!1,pinchToZoom:!1,lockAxis:"x",textSelection:()=>this.option("textSelection",!1),panOnlyZoomed:()=>this.option("panOnlyZoomed",this.elemDimWidth<this.wrapDimWidth),on:{"*":(e,...t)=>this.trigger("Panzoom."+e,...t),init:e=>this.Panzoom=e,updateMetrics:()=>{this.updatePage()},updateBounds:()=>{this.updateBounds()},beforeTransform:this.onBeforeTransform.bind(this),afterAnimate:this.onAfterAnimate.bind(this),touchEnd:this.onTouchEnd.bind(this)}},this.option("Panzoom"));new u(this.$viewport,e)}onBeforeTransform(){this.option("infiniteX",this.option("infinite"))&&this.manageInfiniteTrack(),this.manageSlideVisiblity()}onAfterAnimate(e,t){t||this.trigger("settle")}onTouchEnd(e){const t=this.option("dragFree");if(!t&&this.pages.length>1&&e.drag.elapsedTime<350&&Math.abs(e.drag.distanceY)<1&&Math.abs(e.drag.distanceX)>5)this[e.drag.distanceX<0?"slideNext":"slidePrev"]();else if(t){const[,e]=this.getPageFromPosition(-1*this.Panzoom.pan.x);this.setPage(e)}else this.slideToClosest()}manageInfiniteTrack(){if(!this.option("infiniteX",this.option("infinite"))||this.pages.length<2||this.elemDimWidth<this.wrapDimWidth)return;const e=this.Panzoom;let t=!1;return e.current.x<-1*(e.contentDim.width-e.viewportDim.width)&&(e.current.x+=e.contentDim.width,e.drag.firstPosition&&(e.drag.firstPosition.x+=e.contentDim.width),this.pageIndex=this.pageIndex-this.pages.length,t=!0),e.current.x>e.viewportDim.width&&(e.current.x-=e.contentDim.width,e.drag.firstPosition&&(e.drag.firstPosition.x-=e.contentDim.width),this.pageIndex=this.pageIndex+this.pages.length,t=!0),t&&"dragging"===e.state&&e.resetDragState(),t}manageSlideVisiblity(){const e=this.elemDimWidth,t=this.wrapDimWidth;let i=-1*this.Panzoom.current.x;Math.abs(i)<.1&&(i=0);const n=this.option("preload"),a=this.option("infiniteX",this.option("infinite")),s=parseFloat(window.getComputedStyle(this.$viewport,null).getPropertyValue("padding-left")),o=parseFloat(window.getComputedStyle(this.$viewport,null).getPropertyValue("padding-right"));this.slides.forEach(r=>{let l,c,d=0;l=i-s,c=i+t+o,l-=n*(t+s+o),c+=n*(t+s+o);const h=r.left+r.width>l&&r.left<c;l=i+e-s,c=i+e+t+o,l-=n*(t+s+o);const m=a&&r.left+r.width>l&&r.left<c;l=i-e-s,c=i-e+t+o,l-=n*(t+s+o);const u=a&&r.left+r.width>l&&r.left<c;m||h||u?(this.createSlideEl(r),h&&(d=0),m&&(d=-1),u&&(d=1),r.left+r.width>i&&r.left<=i+t+o&&(d=0)):this.removeSlideEl(r),r.hasDiff=d});let r=0,l=0;this.slides.forEach((t,i)=>{let n=0;t.$el?(i!==r||t.hasDiff?n=l+t.hasDiff*e:l=0,t.$el.style.left=Math.abs(n)>.1?l+t.hasDiff*e+"px":"",r++):l+=t.width}),this.Panzoom.viewportDim.height=this.Panzoom.$content.clientHeight,this.markSelectedSlides()}markSelectedSlides(){const e=this.option("classNames.slideSelected");this.slides.forEach((t,i)=>{const n=t.$el;if(!n)return;const a=this.pages[this.page];a&&a.indexes&&a.indexes.indexOf(i)>-1?(e&&!n.classList.contains(e)&&(n.classList.add(e),this.trigger("selectSlide",t)),n.removeAttribute("aria-hidden")):(e&&n.classList.contains(e)&&(n.classList.remove(e),this.trigger("unselectSlide",t)),n.setAttribute("aria-hidden",!0))})}createSlideEl(e){if(!e)return;if(e.$el){if(parseInt(e.$el.dataset.index,10)!==e.index){e.$el.dataset.index=e.index;let t;e.$el.querySelectorAll("[data-lazy-src]").forEach(e=>{let t=e.dataset.lazySrc;e instanceof HTMLImageElement?e.src=t:e.style.backgroundImage=`url('${t}')`}),(t=e.$el.dataset.lazySrc)&&(e.$el.style.backgroundImage=`url('${t}')`),e.state="ready"}return}const t=document.createElement("div");t.dataset.index=e.index,t.classList.add(this.option("classNames.slide")),e.customClass&&t.classList.add(...e.customClass.split(" ")),e.html&&(t.innerHTML=e.html);const i=[];this.slides.forEach((e,t)=>{e.$el&&i.push(t)});const n=e.index;let a=null;if(i.length){let e=i.reduce((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e);a=this.slides[e]}return this.$track.insertBefore(t,a&&a.$el?a.index<e.index?a.$el.nextSibling:a.$el:null),e.$el=t,this.trigger("createSlide",e,n),e}getSlideMetrics(e){if(!e){const t=this.slides[0];(e=document.createElement("div")).dataset.isTestEl=1,e.style.visibility="hidden",e.classList.add(this.option("classNames.slide")),t.customClass&&e.classList.add(...t.customClass.split(" ")),this.$track.prepend(e)}let t=r(e.getBoundingClientRect().width);const i=e.currentStyle||window.getComputedStyle(e);return t=t+(parseFloat(i.marginLeft)||0)+(parseFloat(i.marginRight)||0),window.visualViewport&&(t*=window.visualViewport.scale),e.dataset.isTestEl&&e.remove(),t}updateMetrics(){let e,t=0,i=[];this.slides.forEach((n,a)=>{const s=n.$el,o=n.isDom||!e?this.getSlideMetrics(s):e;n.index=a,n.width=o,n.left=t,e=o,t+=o,i.push(a)}),this.elemDimWidth=r(t),this.Panzoom.contentDim.width=this.elemDimWidth,this.wrapDimWidth=r(this.$viewport.getBoundingClientRect().width);var n=window.getComputedStyle(this.$viewport),a=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);this.wrapDimWidth=this.wrapDimWidth-a,window.visualViewport&&(this.wrapDimWidth*=window.visualViewport.scale),this.Panzoom.viewportDim.width=this.wrapDimWidth;const s=[],o=this.option("slidesPerPage");if(Number.isInteger(o)&&this.elemDimWidth>this.wrapDimWidth)for(let e=0;e<this.slides.length;e+=o)s.push({indexes:i.slice(e,e+o),slides:this.slides.slice(e,e+o)});else{let e=0,t=0;for(let i=0;i<this.slides.length;i+=1){let n=this.slides[i];(!s.length||t+n.width>this.wrapDimWidth)&&(s.push({indexes:[],slides:[]}),e=s.length-1,t=0),t+=n.width,s[e].indexes.push(i),s[e].slides.push(n)}}const l=this.option("center"),c=this.option("fill");s.forEach((e,t)=>{e.index=t,e.width=e.slides.reduce((e,t)=>e+t.width,0),e.left=e.slides[0].left,l&&(e.left+=.5*(this.wrapDimWidth-e.width)*-1),c&&!this.option("infiniteX",this.option("infinite"))&&this.elemDimWidth>this.wrapDimWidth&&(e.left=Math.max(e.left,0),e.left=Math.min(e.left,this.elemDimWidth-this.wrapDimWidth))});const d=[];let h;s.forEach(e=>{h&&e.left===h.left?(h.width+=e.width,h.slides=[...h.slides,...e.slides],h.indexes=[...h.indexes,...e.indexes]):(e.index=d.length,h=e,d.push(e))}),this.pages=d,this.manageSlideVisiblity(),this.trigger("refresh")}setPage(e,t){let i=0,n=parseInt(e,10)||0;const a=this.page,s=this.pageIndex,o=this.pages.length;if(e=(n%o+o)%o,this.option("infiniteX",this.option("infinite"))&&this.elemDimWidth>this.wrapDimWidth){const a=Math.floor(n/o)||0,s=this.elemDimWidth;if(i=this.pages[e].left+a*s,!0===t&&o>2){let e=-1*this.Panzoom.current.x;const t=i-s,a=i+s,r=Math.abs(e-i),l=Math.abs(e-t),c=Math.abs(e-a);c<r&&c<=l?(i=a,n+=o):l<r&&l<c&&(i=t,n-=o)}}else e=n=Math.max(0,Math.min(n,o-1)),i=this.pages[e].left;return this.page=e,this.pageIndex=n,null!==a&&e!==a&&(this.prevPage=a,this.prevPageIndex=s,this.trigger("change",e,a)),i}slideTo(e,t={}){const{friction:i=this.option("friction")}=t;this.Panzoom.panTo({x:-1*this.setPage(e,!0),y:0,friction:i})}slideToClosest(e={}){let[,t]=this.getPageFromPosition(-1*this.Panzoom.pan.x);this.slideTo(t,e)}slideNext(){this.slideTo(this.pageIndex+1)}slidePrev(){this.slideTo(this.pageIndex-1)}getPageforSlide(e){const t=this.pages.find(t=>t.indexes.indexOf(e)>-1);return t?t.index:null}getPageFromPosition(e){const t=this.pages.length;this.option("center")&&(e+=.5*this.wrapDimWidth);const i=Math.floor(e/this.elemDimWidth);e-=i*this.elemDimWidth;let n=this.slides.find(t=>t.left<e&&t.left+t.width>e);if(n){let e=this.getPageforSlide(n.index);return[e,e+i*t]}return[0,0]}removeSlideEl(e){e.$el&&!e.isDom&&(this.trigger("deleteSlide",e),e.$el.remove(),e.$el=null)}destroy(){this.state="destroy",this.slides.forEach(e=>{this.removeSlideEl(e)}),this.Panzoom.destroy(),this.options={},this.events={}}}b.version="__VERSION__",b.Plugins=v;class E{constructor(e){this.fancybox=e,this.$wrap=null,this.state="init";for(const e of["onReady","onClosing","onKeydown"])this[e]=this[e].bind(this);this.events={ready:this.onReady,closing:this.onClosing,keydown:this.onKeydown}}onReady(){!0===this.fancybox.option("Thumbs.autoStart")&&this.initLayout()}onClosing(){this.Carousel&&this.Carousel.Panzoom.detachEvents()}onKeydown(e,t){t===e.option("Thumbs.key")&&this.toggle()}initLayout(){if("init"!==this.state)return;const e=this.getSlides();if(e.length<this.fancybox.option("Thumbs.minSlideCount"))return!1;const t=document.createElement("div");t.classList.add("fancybox__thumbs"),this.fancybox.$container.appendChild(t),this.Carousel=new b(t,a(!0,{Dots:!1,Navigation:!1,Sync:{friction:0},infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,preload:1},this.fancybox.option("Thumbs.Carousel"),{Sync:{with:this.fancybox.Carousel},slides:e})),this.Carousel.Panzoom.on("wheel",(e,t)=>{t.preventDefault(),this.fancybox[t.deltaY<0?"prev":"next"]()}),this.$wrap=t,this.state="ready"}getSlides(){const e=[];return this.fancybox.items.forEach(t=>{const i=t.thumb;i&&e.push({html:`<div class="fancybox__thumb" style="background-image:url(${i})"></div>`,customClass:"has-thumb has-"+(t.type||"image")})}),e}toggle(){return"ready"===this.state?(this.Carousel.Panzoom.detachEvents(),this.$wrap.style.display="none",void(this.state="hidden")):"hidden"===this.state?(this.$wrap.style.display="",this.Carousel.Panzoom.attachEvents(),void(this.state="ready")):void this.initLayout()}cleanup(){this.Carousel&&(this.Carousel.destroy(),this.Carousel=null),this.$wrap&&(this.$wrap.remove(),this.$wrap=null),this.state="init"}attach(){this.fancybox.on(this.events)}detach(){this.fancybox.off(this.events),this.cleanup()}}E.defaults={autoStart:!0,minSlideCount:3,key:"t"};const w=e=>Object.entries(e).map(e=>e.map(encodeURIComponent).join("=")).join("&"),x={video:{autoplay:!0,ratio:16/9},youtube:{autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},vimeo:{hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},html5video:{tpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />\n  Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!\n</video>',format:""}};class ${constructor(e){this.fancybox=e;for(const e of["onPrepare","onCreateSlide","onDeleteSlide","onSelectSlide","onUnselectSlide","onRefresh","onMessage"])this[e]=this[e].bind(this);this.events={init:this.onPrepare,"Carousel.createSlide":this.onCreateSlide,"Carousel.deleteSlide":this.onDeleteSlide,"Carousel.selectSlide":this.onSelectSlide,"Carousel.unselectSlide":this.onUnselectSlide,"Carousel.refresh":this.onRefresh}}onPrepare(){this.fancybox.items.forEach(e=>{this.processType(e)})}processType(e){if(e.html)return e.src=e.html,e.type="html",void delete e.html;const t=e.src||"";let i=e.type||this.fancybox.options.type,n=null;if(!t||"string"==typeof t){if(n=t.match(/(?:youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const t=w(this.fancybox.option("Html.youtube")),a=encodeURIComponent(n[1]);e.videoId=a,e.src=`https://www.youtube-nocookie.com/embed/${a}?${t}`,e.thumb=e.thumb||`https://i.ytimg.com/vi/${a}/mqdefault.jpg`,e.vendor="youtube",i="video"}else if(n=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)(.*)?/)){const t=w(this.fancybox.option("Html.vimeo")),a=encodeURIComponent(n[1]);e.videoId=a,e.src=`https://player.vimeo.com/video/${a}?${t}`,e.vendor="vimeo",i="video"}else(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`//maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(n[3])+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,i="map"):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`//maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,i="map");i||("#"===t.charAt(0)?i="inline":(n=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i="html5video",e.format=e.format||"video/"+("ogv"===n[1]?"ogg":n[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i="image":t.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),e.type=i||this.fancybox.option("defaultType","image"),"html5video"!==i&&"video"!==i||(e.video=a({},this.fancybox.option("Html.video"),e.video),e.width&&e.height?e.ratio=parseFloat(e.width)/parseFloat(e.height):e.ratio=e.ratio||e.video.ratio)}}loadInlineContent(e){let t;if(e.src instanceof HTMLElement)t=e.src;else if("string"==typeof e.src){const i=e.src.split("#",2),n=2===i.length&&""===i[0]?i[1]:i[0];t=document.getElementById(n)}if(t){if("clone"===e.type||t.$placeHolder){t=t.cloneNode(!0);let i=t.getAttribute("id");i=i?i+"--clone":`clone-${this.fancybox.id}-${e.index}`,t.setAttribute("id",i)}else{const e=document.createElement("div");e.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(e,t),t.$placeHolder=e}this.fancybox.setContent(e,t)}else this.fancybox.setError(e,"{{ELEMENT_NOT_FOUND}}")}loadAjaxContent(e){const t=this.fancybox,i=new XMLHttpRequest;t.showLoading(e),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&"ready"===t.state&&(t.hideLoading(e),200===i.status?t.setContent(e,i.responseText):t.setError(e,404===i.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))},i.open("GET",e.src),i.send(e.ajax||null),e.xhr=i}loadIframeContent(e){const t=this.fancybox,i=document.createElement("iframe");if(i.className="fancybox__iframe",i.setAttribute("id",`fancybox__iframe_${t.id}_${e.index}`),i.setAttribute("allow","autoplay; fullscreen"),i.setAttribute("scrolling","auto"),e.$iframe=i,"iframe"!==e.type||!1===e.preload)return i.setAttribute("src",e.src),void this.fancybox.setContent(e,i);t.showLoading(e);const n=document.createElement("div");n.style.visibility="hidden",this.fancybox.setContent(e,n),n.appendChild(i),i.onerror=()=>{t.setError(e,"{{IFRAME_ERROR}}")},i.onload=()=>{t.hideLoading(e);let n=!1;"yes"!==i.dataset.ready&&(i.dataset.ready="yes",n=!0),i.src.length&&(i.parentNode.style.visibility="",!1!==e.autoSize&&this.autoSizeIframe(i),n&&t.revealContent(e))},i.setAttribute("src",e.src)}setAspectRatio(e){let t=e.ratio;if(!t||!e.$content)return;e.$content.style.maxWidth="",e.$content.style.maxHeight="";let i=e.$content.offsetWidth,n=e.$content.offsetHeight,a=e.width,s=e.height;if(a&&s&&(i>a||n>s)){let e=Math.min(a/i,s/n);i*=e,n*=e}t<i/n?i=n*t:n=i/t,e.$content.style.maxWidth=i+"px",e.$content.style.maxHeight=n+"px"}autoSizeIframe(e){if(!e.dataset||"yes"!==e.dataset.ready)return;let t=e.parentNode.style;t.flex="1 1 auto",t.width="",t.height="";try{const i=e.contentWindow.document,n=i.getElementsByTagName("html")[0],a=i.body,s=window.getComputedStyle(e.parentNode),o=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),r=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom);a.style.overflow="hidden";const l=n.scrollWidth;t.width=l+o+"px",a.style.overflow="",t.flex="",t.flexShrink="0",t.height=a.scrollHeight+"px";const c=n.scrollHeight;t.height=c+r+"px"}catch(e){t=""}}onRefresh(e,t){t.slides.forEach(e=>{e.$el&&(e.$iframe&&!1!==e.autoSize&&this.autoSizeIframe(e.$iframe),e.ratio&&this.setAspectRatio(e))})}onCreateSlide(e,t,i){if(i&&!i.isDom){switch(i.type){case"html":this.fancybox.setContent(i,i.src);break;case"html5video":this.fancybox.setContent(i,this.fancybox.option("Html.html5video.tpl").replace(/\{\{src\}\}/gi,i.src).replace("{{format}}",i.format||i.html5video&&i.html5video.format||"").replace("{{poster}}",i.thumb||""));break;case"inline":case"clone":this.loadInlineContent(i);break;case"ajax":this.loadAjaxContent(i);break;case"iframe":case"pdf":case"video":case"map":this.loadIframeContent(i)}i.ratio&&this.setAspectRatio(i)}}onSelectSlide(e,t,i){if("html5video"===i.type&&i.$el.querySelector("video").play(),"video"!==i.type||!i.$iframe||!i.$iframe.contentWindow)return;const n=()=>{if("done"!==i.state||!i.$iframe.contentWindow)return;let e;if(i.$iframe.isReady)return i.video&&i.video.autoplay&&(e="youtube"==i.vendor?{event:"command",func:"playVideo"}:{method:"play",value:"true"}),void(e&&i.$iframe.contentWindow.postMessage(JSON.stringify(e),"*"));"youtube"===i.vendor&&(e={event:"listening",id:i.$iframe.getAttribute("id")},i.$iframe.contentWindow.postMessage(JSON.stringify(e),"*")),i.poller=setTimeout(n,250)};n()}onUnselectSlide(e,t,i){if("html5video"===i.type){try{i.$el.querySelector("video").pause()}catch(e){}return}let n=!1;"vimeo"==i.vendor?n={method:"pause",value:"true"}:"youtube"===i.vendor&&(n={event:"command",func:"pauseVideo"}),n&&i.$iframe&&i.$iframe.contentWindow&&i.$iframe.contentWindow.postMessage(JSON.stringify(n),"*"),clearTimeout(i.poller)}onDeleteSlide(e,t,i){i.xhr&&(i.xhr.abort(),i.xhr=null),i.$iframe&&(i.$iframe.onload=i.$iframe.onerror=null,i.$iframe.src="//about:blank",i.$iframe=null);const n=i.$content;"inline"===i.type&&n&&(n.classList.remove("fancybox__content"),"none"!==n.style.display&&(n.style.display="none"),i.$closeButton&&(i.$closeButton.remove(),i.$closeButton=null));const a=n&&n.$placeHolder;a&&(a.parentNode.insertBefore(n,a),a.remove(),n.$placeHolder=null)}onMessage(e){try{let t=JSON.parse(e.data);if("https://player.vimeo.com"===e.origin){if("ready"===t.event)for(let t of document.getElementsByClassName("fancybox__iframe"))t.contentWindow===e.source&&(t.isReady=1)}else"https://www.youtube-nocookie.com"===e.origin&&"onReady"===t.event&&(document.getElementById(t.id).isReady=1)}catch(e){}}attach(){this.fancybox.on(this.events),window.addEventListener("message",this.onMessage,!1)}detach(){this.fancybox.off(this.events),window.removeEventListener("message",this.onMessage,!1)}}$.defaults=x;const L=function(e){const t=e.naturalWidth,i=e.naturalHeight,n=e.width,a=e.height,s=t/i,o={width:n,height:a};return s>n/a?o.height=n/s:o.width=a*s,o.left=.5*(n-o.width),o.right=t+o.left,o};class C{constructor(e){this.fancybox=e;for(const e of["onReady","onClosing","onPageChange","onCreateSlide","onRemoveSlide","onRefresh","onImageStatusChange"])this[e]=this[e].bind(this);this.events={ready:this.onReady,closing:this.onClosing,"Carousel.change":this.onPageChange,"Carousel.createSlide":this.onCreateSlide,"Carousel.deleteSlide":this.onRemoveSlide,"Carousel.Panzoom.updateMetrics":this.onRefresh}}onReady(){const e=this.fancybox.getSlide();"ready"===e.state&&this.revealContent(e)}onCreateSlide(e,t,i){if(i.isDom||i.html||i.type&&"image"!==i.type)return;i.type="image",i.state="loading";const n=document.createElement("div");n.style.visibility="hidden";const a=document.createElement("img");a.onload=()=>this.onImageStatusChange(i),a.onerror=()=>this.onImageStatusChange(i),a.src=i.src,a.alt="",a.draggable=!1,a.classList.add("fancybox__image"),i.srcset&&a.setAttribute("srcset",i.srcset),i.sizes&&a.setAttribute("sizes",i.sizes),i.$image=a,n.appendChild(a),i.$el.dataset.imageFit=this.fancybox.option("Image.fit"),i.$el.style.display="none",i.$el.offsetHeight,i.$el.style.display="",this.fancybox.setContent(i,n),a.complete||a.error?(a.onload=a.onerror=null,this.onImageStatusChange(i)):a.complete||this.fancybox.showLoading(i)}initSlidePanzoom(e){e.Panzoom||(e.Panzoom=new u(e.$el,a(!0,this.fancybox.option("Image.Panzoom"),{content:e.$image,panOnlyZoomed:!0,click:null,doubleClick:null,wheel:null,on:{afterAnimate:t=>{"zoomIn"===e.state&&(t.attachEvents(),this.fancybox.done(e)),this.handleCursor(e)},updateMetrics:()=>{this.handleCursor(e)},touchMove:()=>{if(this.fancybox.Carousel.Panzoom.lockAxis)return!1}}})),this.fancybox.option("Image.wheel")&&e.Panzoom.on("wheel",(e,t)=>this.onWheel(e,t)),this.fancybox.option("Image.click")&&e.Panzoom.on("click",(e,t)=>this.onClick(e,t)),"toggleZoom"===this.fancybox.option("Image.doubleClick")&&e.Panzoom.on("doubleClick",(e,t)=>{if(!t.target.closest(".fancybox__content"))return;t.preventDefault(),t.stopPropagation();const i=t.clientX-e.$content.getClientRects()[0].left,n=t.clientY-e.$content.getClientRects()[0].top;e.toggleZoom({x:i,y:n})}))}onImageStatusChange(e){this.fancybox.hideLoading(e);const t=e.$image;t.complete&&t.width&&t.height?(e.state="ready",this.updateDimensions(e),this.initSlidePanzoom(e),this.revealContent(e)):this.fancybox.setError(e,"{{IMAGE_ERROR}}")}updateDimensions(e){if("cover"!==e.$el.dataset.imageFit){const t=e.$image,i=e.$content;i.style.maxWidth="";const n=t.offsetWidth-t.clientWidth;i.style.maxWidth=L(t).width+n+"px"}this.handleCursor(e)}revealContent(e){this.updateDimensions(e),null===this.fancybox.Carousel.prevPage&&e.index===this.fancybox.options.startIndex&&this.canZoom(e)?this.zoomIn():this.fancybox.revealContent(e)}canZoom(e){const t=this.fancybox,i=t.$container;let n=!1;if(!t.option("Image.zoom"))return n;const a=e.$thumb;if(!a||"loading"===e.state)return n;i.style.pointerEvents="none";const s=a.getBoundingClientRect();if(this.fancybox.option("Image.ignoreCoveredThumbnail")){const e=document.elementFromPoint(s.left+1,s.top+1)===a,t=document.elementFromPoint(s.right-1,s.bottom-1)===a;n=e&&t}else n=document.elementFromPoint(s.left+.5*s.width,s.top+.5*s.height)===a;return i.style.pointerEvents="",n}getZoomInfo(e){const t=e.$thumb.getBoundingClientRect(),i=t.width,n=t.height,a=e.$content.getBoundingClientRect(),s=L(e.$image),o=s.width,r=s.height,l=a.top+.5*r-(t.top+.5*n),c=a.left+.5*o-(t.left+.5*i);let d=this.fancybox.option("Image.zoomOpacity");return"auto"===d&&(d=Math.abs(i/n-o/r)>.1),{top:l,left:c,scale:t.width/o,opacity:d}}zoomIn(){const e=this.fancybox;if("init"===e.Carousel.state)return;const t=e.getSlide(),i=t.Panzoom,{top:n,left:a,scale:s,opacity:o}=this.getZoomInfo(t);t.state="zoomIn",i.detachEvents(),e.trigger("reveal",t),i.panTo({x:-1*a,y:-1*n,scale:s,friction:0,ignoreBounds:!0}),t.$content.style.visibility="",!0===o&&i.on("afterTransform",e=>{"zoomIn"!==t.state&&"zoomOut"!==t.state||(e.$content.style.opacity=Math.min(1,e.current.scale))}),i.panTo({x:0,y:0,scale:1,friction:this.fancybox.option("Image.zoomFriction")})}zoomOut(){const e=this.fancybox,t=e.getSlide(),i=t.Panzoom;if(!i)return;t.state="zoomOut",e.state="customClosing",t.$caption&&(t.$caption.style.visibility="hidden");let n=.75*this.fancybox.option("Image.zoomFriction");const a=()=>{const{top:e,left:a,scale:s}=this.getZoomInfo(t);i.panTo({x:-1*a,y:-1*e,scale:s,ignoreBounds:!0,friction:n}),n*=.98};window.addEventListener("scroll",a),i.on("afterAnimate",()=>{window.removeEventListener("scroll",a),e.destroy()}),a()}handleCursor(e){const t=e.Panzoom,i=this.fancybox.option("Image.click"),n=e.$el.classList;if(t&&"toggleZoom"===i){n[t&&1===t.current.scale&&t.option("maxScale")-t.current.scale>.01?"add":"remove"](this.fancybox.option("Image.canZoomInClass"))}else"close"===i&&n.add(this.fancybox.option("Image.canZoomOutClass"))}onWheel(e,t){switch(this.fancybox.option("Image.wheel")){case"zoom":e.zoomWithWheel(t);break;case"close":this.fancybox.close();break;case"slide":this.fancybox[t.deltaY<0?"prev":"next"]()}t.preventDefault()}onClick(e,t){if(!(this.fancybox.Carousel.Panzoom.drag.distance>=6||this.fancybox.Carousel.Panzoom.lockAxis||"IMG"!=t.target.tagName&&!t.target.classList.contains("fancybox__content")))switch(t.preventDefault(),t.stopPropagation(),this.fancybox.option("Image.click")){case"toggleZoom":const i=t.clientX-e.$content.getClientRects()[0].left,n=t.clientY-e.$content.getClientRects()[0].top;e.toggleZoom({x:i,y:n});break;case"close":this.fancybox.close();break;case"next":this.fancybox.next();break;case"prev":this.fancybox.prev()}}onRefresh(e,t){t.slides.forEach(e=>{e.Panzoom&&this.updateDimensions(e)})}onRemoveSlide(e,t,i){i.$image&&(i.$el.classList.remove(e.option("Image.canZoomInClass")),i.$image.onload=i.$image.onerror=null,i.$image.remove(),i.$image=null),i.Panzoom&&(i.Panzoom.destroy(),i.Panzoom=null),delete i.$el.dataset.imageFit}onClosing(e){e.Carousel.slides.forEach(e=>{e.$image&&(e.$image.onload=e.$image.onerror=null),e.Panzoom&&e.Panzoom.detachEvents()}),"closing"===this.fancybox.state&&this.canZoom(e.getSlide())&&this.zoomOut()}onPageChange(e,t){const i=e.getSlide();t.slides.forEach(e=>{e.Panzoom&&"done"===e.state&&(e.index!==i.index?e.Panzoom.panTo({x:0,y:0,scale:1,friction:.8}):0===t.Panzoom.velocity.x&&this.revealContent(e))})}attach(){this.fancybox.on(this.events)}detach(){this.fancybox.off(this.events)}}C.defaults={Panzoom:{maxScale:1},canZoomInClass:"can-zoom_in",canZoomOutClass:"can-zoom_out",zoom:!0,zoomOpacity:"auto",zoomFriction:.8,ignoreCoveredThumbnail:!1,click:"toggleZoom",doubleClick:null,wheel:"zoom",fit:"contain"};const S=function(){const e=window.location.hash.substr(1),t=e.split("-"),i=t.length>1&&/^\+?\d+$/.test(t[t.length-1])&&parseInt(t.pop(-1),10)||null;return{hash:e,slug:t.join("-"),index:i}};class N{constructor(e){this.fancybox=e,this.events={closing:this.onClosing.bind(this),"Carousel.ready Carousel.change":this.onChange.bind(this)},this.hasCreatedHistory=!1,this.origHash="",this.timer=null}onChange(e,t){this.timer&&clearTimeout(this.timer);const i=null===t.prevPage,n=e.getSlide(),a=n.$trigger&&n.$trigger.dataset,s=window.location.hash.substr(1);let o=!1;if(n.slug)o=n.slug;else{let e=a&&a.fancybox;e&&e.length&&"true"!==e&&(o=e+(t.slides.length>1?"-"+(n.index+1):""))}i&&(this.origHash=s!==o?this.origHash:""),o&&s!==o&&(this.timer=setTimeout(()=>{try{window.history[i?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+"#"+o),i&&(this.hasCreatedHistory=!0)}catch(e){}},300))}onClosing(){if(this.timer&&clearTimeout(this.timer),!0!==this.hasSilentClose){if(!this.hasCreatedHistory)try{return void window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash?"#"+this.origHash:""))}catch(e){}window.history.back()}}attach(e){e.on(this.events)}detach(e){e.off(this.events)}static startFromUrl(){if(N.Fancybox.getInstance())return;const{hash:e,slug:t,index:i}=S();if(!t)return;let n=document.querySelector(`[data-slug="${e}"]`);if(n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),N.Fancybox.getInstance())return;const a=document.querySelectorAll(`[data-fancybox="${t}"]`);a.length&&(null===i&&1===a.length?n=a[0]:i&&(n=a[i-1]),n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))}static onHashChange(){const{slug:e,index:t}=S(),i=N.Fancybox.getInstance();if(i){if(e){const n=i.Carousel;for(let t of n.slides)if(t.slug&&t.slug===e)return n.slideTo(t.index);const a=i.getSlide(),s=a.$trigger&&a.$trigger.dataset;if(s&&s.fancybox===e)return n.slideTo(t-1)}i.plugins.Hash.hasSilentClose=!0,i.close()}N.startFromUrl()}static onReady(){window.addEventListener("hashchange",N.onHashChange,!1),N.startFromUrl()}static create(){s&&window.requestAnimationFrame(()=>{N.onReady()})}static destroy(){window.removeEventListener("hashchange",N.onHashChange,!1)}}const k={ScrollLock:class{constructor(e){this.fancybox=e,this.viewport=null,this.pendingUpdate=null;for(const e of["onReady","onResize","onTouchstart","onTouchmove"])this[e]=this[e].bind(this)}onReady(){const e=window.visualViewport;e&&(this.viewport=e,this.startY=0,e.addEventListener("resize",this.onResize),this.updateViewport()),window.addEventListener("touchstart",this.onTouchstart,{passive:!1}),window.addEventListener("touchmove",this.onTouchmove,{passive:!1})}onResize(){this.updateViewport()}updateViewport(){const e=this.fancybox,t=this.viewport,i=t.scale,n=e.$container;if(!n)return;let a="",s="",o="";Math.abs(i-1)>.1&&(a=t.width*i+"px",s=t.height*i+"px",o=`translate3d(${t.offsetLeft}px, ${t.offsetTop}px, 0) scale(${1/i})`),n.style.width=a,n.style.height=s,n.style.transform=o}onTouchstart(e){this.startY=e.touches?e.touches[0].screenY:e.screenY}onTouchmove(e){const t=this.startY,i=window.innerWidth/window.document.documentElement.clientWidth;if(e.touches.length>1||1!==i)return;const n=e.target,a=c(n);if(!a)return void e.preventDefault();const s=window.getComputedStyle(a),o=parseInt(s.getPropertyValue("height"),10),r=e.touches?e.touches[0].screenY:e.screenY,l=t<=r&&0===a.scrollTop,d=t>=r&&a.scrollHeight-a.scrollTop===o;(l||d)&&e.preventDefault()}cleanup(){this.pendingUpdate&&(cancelAnimationFrame(this.pendingUpdate),this.pendingUpdate=null);const e=this.viewport;e&&(e.removeEventListener("resize",this.onResize),this.viewport=null),window.removeEventListener("touchstart",this.onTouchstart,!1),window.removeEventListener("touchmove",this.onTouchmove,!1)}attach(){this.fancybox.on("initLayout",this.onReady)}detach(){this.fancybox.off("initLayout",this.onReady),this.cleanup()}},Thumbs:E,Html:$,Image:C,Hash:N};let P=0,M=null;class H extends o{constructor(e,t={}){M=function(){let e=!1;return document.createElement("div").focus({get preventScroll(){return e=!0,!1}}),e}(),super(function(e,t){const i=a(!0,{},e[t.startIndex]||{});return e.forEach(e=>{const t=e.$trigger;if(t){const i=t.dataset||{};e.src=i.src||t.getAttribute("href")||e.src,e.type=i.type||e.type}}),a(!0,{},H.defaults,t,i)}(e,t)),this.state="init",this.items=e,this.bindHandlers(),this.attachPlugins(H.Plugins),this.trigger("init"),!0===this.option("hideScrollbar")&&this.hideScrollbar(),this.initLayout(),this.initCarousel(this.getSlides()),this.attachEvents(),this.state="ready",this.trigger("ready"),this.$container.setAttribute("aria-hidden","false")}bindHandlers(){for(const e of["onMousedown","onKeydown","onClick","onCreateSlide","onSettle","onTouchMove","onTouchEnd","onTransform"])this[e]=this[e].bind(this)}attachEvents(){document.addEventListener("mousedown",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.$container.addEventListener("click",this.onClick)}detachEvents(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("keydown",this.onKeydown),this.$container.removeEventListener("click",this.onClick)}initLayout(){this.$root=this.option("parentEl")||document.body;let e=this.option("template.main");e&&(this.$root.insertAdjacentHTML("beforeend",this.localize(e)),this.$container=this.$root.querySelector(".fancybox__container")),this.$container||(this.$container=document.createElement("div"),this.$root.appendChild(this.$container)),this.$container.onscroll=()=>(this.$container.scrollLeft=0,!1),Object.entries({class:"fancybox__container",role:"dialog","aria-modal":"true","aria-hidden":"true","aria-label":this.localize("{{MODAL}}")}).forEach(e=>this.$container.setAttribute(...e)),this.option("animated")&&this.$container.classList.add("is-animated"),this.$backdrop=this.$container.querySelector(".fancybox__backdrop"),this.$backdrop||(this.$backdrop=document.createElement("div"),this.$backdrop.classList.add("fancybox__backdrop"),this.$container.appendChild(this.$backdrop)),this.$carousel=this.$container.querySelector(".fancybox__carousel"),this.$carousel||(this.$carousel=document.createElement("div"),this.$carousel.classList.add("fancybox__carousel"),this.$container.appendChild(this.$carousel)),this.$container.Fancybox=this,this.id=this.$container.getAttribute("id"),this.id||(this.id=this.options.id||++P,this.$container.setAttribute("id","fancybox-"+this.id));const t=this.options.mainClass;return t&&this.$container.classList.add(...t.split(" ")),document.documentElement.classList.add("with-fancybox"),this.trigger("initLayout"),this}getSlides(){const e=[...this.items];return e.forEach(e=>{!e.src&&e.$trigger&&e.$trigger instanceof HTMLImageElement&&(e.src=e.$trigger.currentSrc||e.$trigger.src);let t=e.$thumb;const i=e.$trigger&&e.$trigger.origTarget;i&&(t=i instanceof HTMLImageElement?i:i.querySelector("img")),!t&&e.$trigger&&(t=e.$trigger instanceof HTMLImageElement?e.$trigger:e.$trigger.querySelector("img")),e.$thumb=t||null;let n=e.thumb;!n&&e.$thumb&&(n=t.currentSrc||t.src),n||e.type&&"image"!==e.type||(n=e.src),e.thumb=n||null}),e}initCarousel(e){return new b(this.$carousel,a(!0,{},{classNames:{viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"},textSelection:!0,preload:this.option("preload"),friction:.88,slides:e,initialPage:this.options.startIndex,slidesPerPage:1,infiniteX:this.option("infinite"),infiniteY:!0,l10n:this.option("l10n"),Dots:!1,Navigation:{classNames:{main:"fancybox__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}},Panzoom:{panOnlyZoomed:()=>this.Carousel.pages.length<2&&!this.options.dragToClose,lockAxis:()=>{let e=this.Carousel.pages.length>1?"x":"";return this.options.dragToClose&&(e+="y"),e}},on:{"*":(e,...t)=>this.trigger("Carousel."+e,...t),init:e=>this.Carousel=e,createSlide:this.onCreateSlide,settle:this.onSettle}},this.option("Carousel"))),this.options.dragToClose&&this.Carousel.Panzoom.on({touchMove:this.onTouchMove,afterTransform:this.onTransform,touchEnd:this.onTouchEnd}),this.trigger("initCarousel"),this}onCreateSlide(e,t){const i=t.caption;if(i){const e=document.createElement("div"),n=`fancybox__caption_${this.id}_${t.index}`;e.className="fancybox__caption",e.innerHTML=i,e.setAttribute("id",n),t.$caption=t.$el.appendChild(e),t.$el.classList.add("has-caption"),t.$el.setAttribute("aria-labelledby",n)}}onSettle(){this.focus()}onClick(e){if(e.defaultPrevented)return;if(e.target.closest(".fancybox__content"))return;if(window.getSelection().toString().length)return;const t=this.option("click");if("function"==typeof t)return t.call(this);switch(t){case"close":this.close();break;case"next":this.next()}}onTouchMove(){const e=this.getSlide().Panzoom;return!e||1===e.current.scale}onTouchEnd(e){const t=e.drag.distanceY;(Math.abs(t)>=150||Math.abs(t)>=35&&e.drag.elapsedTime<350)&&(this.option("hideClass")&&(this.getSlide().hideClass="fancybox-throwOut"+(e.current.y<0?"Up":"Down")),this.close())}onTransform(e){if(this.$backdrop){const t=Math.abs(e.current.y),i=t<1?"":Math.max(0,Math.min(1,1-t/e.$content.clientHeight*1.5));this.$container.style.setProperty("--fancybox-ts",i?"0s":""),this.$container.style.setProperty("--fancybox-opacity",i)}}onMousedown(){document.body.classList.add("is-using-mouse")}onKeydown(e){if(H.getInstance().id!==this.id)return;document.body.classList.remove("is-using-mouse");const t=e.key;if("Tab"===t&&this.option("trapFocus"))return void this.focus(e);const i=this.option("keyboard");if(!i||e.ctrlKey||e.altKey||e.shiftKey)return;const n=document.activeElement&&document.activeElement.classList,a=n&&n.contains("carousel__button");if("Escape"!==t&&!a){if(e.target.isContentEditable||-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(e.target.nodeName))return}if(!1===this.trigger("keydown",t))return;"Enter"!==t&&e.preventDefault();const s=i[t];"function"==typeof this[s]&&this[s]()}getSlide(){const e=this.Carousel;if(!e)return null;const t=null===e.page?e.option("initialPage"):e.page,i=e.pages||[];return i.length&&i[t]?i[t].slides[0]:null}focus(e){const t=e=>{e.setActive?e.setActive():M?e.focus({preventScroll:!0}):e.focus()};e&&e.preventDefault();const i=this.getSlide().$el;i.tabIndex=0;const n=[].slice.call(this.$container.querySelectorAll(["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'])),a=[];for(let e of n){if(e.classList&&e.classList.contains("fancybox__slide"))continue;const t=e.closest(".fancybox__slide");t?t===i&&a[e.hasAttribute("autofocus")?"unshift":"push"](e):a.push(e)}if(!a.length)return;this.Carousel.pages.length>1&&a.push(i);const s=a.indexOf(document.activeElement),o=e&&!e.shiftKey,r=e&&e.shiftKey;return o?s===a.length-1?t(a[0]):t(a[s+1]):r?t(0===s?a[a.length-1]:a[s-1]):s<0?t(a[0]):void 0}hideScrollbar(){if(!s)return;const e=window.innerWidth-document.documentElement.getBoundingClientRect().width,t="fancybox-style-noscroll";let i=document.getElementById(t);i||e&&(i=document.createElement("style"),i.id=t,i.type="text/css",i.innerHTML=`.compensate-for-scrollbar {padding-right: ${e}px;}`,document.getElementsByTagName("head")[0].appendChild(i),document.body.classList.add("compensate-for-scrollbar"))}revealScrollbar(){document.body.classList.remove("compensate-for-scrollbar");const e=document.getElementById("fancybox-style-noscroll");e&&e.remove()}clearContent(e){this.Carousel.trigger("deleteSlide",e),e.$content&&(e.$content.remove(),e.$content=null),e._className&&e.$el.classList.remove(e._className)}setContent(e,t,i={}){let n;const a=e.$el;if(t instanceof HTMLElement?["img","iframe","video","audio"].indexOf(t.nodeName.toLowerCase())>-1?(n=document.createElement("div"),n.appendChild(t)):n=t:(n=document.createElement("div"),n.innerHTML=t),!(n instanceof Element))throw new Error("Element expected");return e._className="has-"+(i.suffix||e.type||"unknown"),a.classList.add(e._className),n.classList.add("fancybox__content"),"none"!==n.style.display&&"none"!==window.getComputedStyle(n).getPropertyValue("display")||(n.style.display="flex"),e.id&&n.setAttribute("id",e.id),e.$content=n,a.insertBefore(n,a.querySelector(".fancybox__caption")),this.manageCloseButton(e),"loading"!==e.state&&this.revealContent(e),n}manageCloseButton(e){const t=void 0===e.closeButton?this.option("closeButton"):e.closeButton;if(!t||this.$closeButton&&"inside"!==t)return;const i=document.createElement("button");i.classList.add("carousel__button","is-close"),i.setAttribute("title",this.options.l10n.CLOSE),i.innerHTML=this.option("template.closeButton"),i.addEventListener("click",e=>this.close(e)),"inside"===t?(e.$closeButton&&e.$closeButton.remove(),e.$closeButton=e.$content.appendChild(i)):this.$closeButton=this.$container.insertBefore(i,this.$container.firstChild)}revealContent(e){this.trigger("reveal",e),e.$content.style.visibility="";let t=!1;"error"!==e.state&&"ready"!==e.state&&null===this.Carousel.prevPage&&e.index===this.options.startIndex&&(t=void 0===e.showClass?this.option("showClass"):e.showClass),t?(e.state="animating",this.animateCSS(e.$content,t,()=>{this.done(e)})):this.done(e)}animateCSS(e,t,i){if(e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!0,cancelable:!0})),!e||!t)return void("function"==typeof i&&i());const n=function(a){a.currentTarget===this&&(e.classList.remove(t),e.removeEventListener("animationend",n),i&&i())};e.addEventListener("animationend",n),e.classList.add(t)}done(e){if("init"!==this.state&&"ready"!==this.state)return;e.state="done",this.trigger("done",e);const t=this.getSlide();t&&e.index===t.index&&this.option("autoFocus")&&this.focus()}setError(e,t){e.state="error",this.hideLoading(e),this.clearContent(e);const i=document.createElement("div");i.classList.add("fancybox-error"),i.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,i,{suffix:"error"})}showLoading(e){e.state="loading",this.trigger("load",e),e.$el.classList.add("is-loading");let t=e.$el.querySelector(".fancybox__spinner");t||(t=document.createElement("div"),t.classList.add("fancybox__spinner"),t.innerHTML=this.option("template.spinner"),t.addEventListener("click",()=>{this.Carousel.Panzoom.velocity||this.close()}),e.$el.insertBefore(t,e.$el.firstChild))}hideLoading(e){const t=e.$el&&e.$el.querySelector(".fancybox__spinner");t&&(t.remove(),e.$el.classList.remove("is-loading")),"loading"===e.state&&(e.state="ready")}next(){const e=this.Carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.Carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.Carousel&&this.Carousel.slideTo(...e)}close(e){if(e&&e.preventDefault(),["closing","customClosing","destroy"].indexOf(this.state)>-1)return;if(!1===this.trigger("shouldClose",e))return;if(this.state="closing",this.Carousel.Panzoom.destroy(),this.detachEvents(),this.trigger("closing",e),"destroy"===this.state)return;this.$container.setAttribute("aria-hidden","true"),this.$container.classList.add("is-closing");const t=this.getSlide();if(this.Carousel.slides.forEach(e=>{e.$content&&e.index!==t.index&&e.$content.remove()}),"closing"===this.state){const e=void 0===t.hideClass?this.option("hideClass"):t.hideClass;this.animateCSS(t.$content,e,()=>{this.destroy()})}}destroy(){this.state="destroy",this.trigger("destroy");const e=this.option("placeFocusBack")?this.getSlide().$trigger:null;if(this.Carousel.destroy(),this.detachPlugins(),this.Carousel=null,this.options={},this.events={},this.$container.remove(),this.$container=this.$backdrop=this.$carousel=null,e)if(M)e.focus({preventScroll:!0});else{const t=document.body.scrollTop;e.focus(),document.body.scrollTop=t}const t=H.getInstance();t?t.focus():(document.documentElement.classList.remove("with-fancybox"),document.body.classList.remove("is-using-mouse"),this.revealScrollbar())}static show(e,t={}){return new H(e,t)}static fromEvent(e,t={}){if(e.defaultPrevented)return;if(e.button&&0!==e.button)return;if(e.ctrlKey||e.metaKey||e.shiftKey)return;let i,n,a,s=!1,o=e.target;if((o.matches("[data-fancybox-trigger]")||(o=o.closest("[data-fancybox-trigger]")))&&(a=o&&o.dataset&&o.dataset.fancyboxTrigger),a){const e=document.querySelectorAll(`[data-fancybox="${a}"]`),t=parseInt(o.dataset.fancyboxIndex,10)||0;o=e.length?e[t]:o}o||(o=e.target),Array.from(H.openers.keys()).reverse().some(t=>{if(i=o,i.matches(t)||(i=i.closest(t)))return e.preventDefault(),n=t,!0}),n&&(t.target=i,i.origTarget=e.target,s=H.fromOpener(n,t));const r=H.getInstance();return r&&"ready"===r.state&&e.detail&&document.body.classList.add("is-using-mouse"),s}static fromOpener(e,t={}){let i=[],n=t.startIndex||0,s=(t=a({},t,H.openers.get(e))).groupAttr;void 0===s&&(s="data-fancybox");let o=t.target;if(s){if(o&&e&&e===`[${s}]`){const t=o.getAttribute(""+s);e=!(!t||!t.length||"true"===t)&&`[${s}='${t}']`}}else e=!1;if(e&&(i=[].slice.call(document.querySelectorAll(e))),!i.length&&o&&(i=[o]),!i.length)return!1;const r=H.getInstance();return!(r&&i.indexOf(r.options.$trigger)>-1)&&(n=o?i.indexOf(o):n,i=i.map((function(e){const t=["false","0","no","null"],i=["true","1","yes"],n=Object.assign({},e.dataset);for(let[e,a]of Object.entries(n))if("string"==typeof a||a instanceof String)if(t.indexOf(a)>-1)n[e]=!1;else if(i.indexOf(n[e])>-1)n[e]=!0;else try{n[e]=JSON.parse(a)}catch(t){n[e]=a}return delete n.fancybox,delete n.type,e instanceof Element&&(n.$trigger=e),n})),new H(i,a({},t,{startIndex:n,$trigger:o})))}static bind(e,t={}){if(s){if(!H.openers.size){document.body.addEventListener("click",H.fromEvent,!1);for(const[e,t]of Object.entries(H.Plugins||{}))t.Fancybox=this,"function"==typeof t.create&&t.create()}H.openers.set(e,t)}}static unbind(e){H.openers.delete(e),H.openers.size||H.destroy()}static destroy(){let e;for(;e=H.getInstance();)e.destroy();H.openers=new Map,document.body.removeEventListener("click",H.fromEvent,!1)}static getInstance(e){let t=[];t=e?[document.getElementById("fancybox-"+e)]:Array.from(document.querySelectorAll(".fancybox__container")).reverse();for(const e of t){const t=e&&e.Fancybox;if(t&&"closing"!==t.state&&"customClosing"!==t.state)return t}return null}static close(e=!0){let t=null;for(;t=H.getInstance();)if(t.close(),!e)return}}H.version="__VERSION__",H.defaults={startIndex:0,preload:1,infinite:!0,showClass:"fancybox-zoomInUp",hideClass:"fancybox-fadeOut",animated:!0,hideScrollbar:!0,parentEl:null,mainClass:null,autoFocus:!0,trapFocus:!0,placeFocusBack:!0,click:"close",closeButton:"inside",dragToClose:!0,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"next",ArrowDown:"prev",ArrowRight:"next",ArrowLeft:"prev"},template:{closeButton:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="25 25 50 50" tabindex="-1"><circle cx="50" cy="50" r="20"/></svg>',main:null},l10n:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page"}},H.openers=new Map,H.Plugins=k,H.isMobile=()=>!!navigator&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),H.bind("[data-fancybox]")}}]);